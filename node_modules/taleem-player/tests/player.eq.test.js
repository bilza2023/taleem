import { describe, it, expect } from "vitest";
import { Player } from "../src/Player.js";

const eqDeck = {
  version: "deck-v1",
  deck: [
    {
      start: 0,
      end: 10,
      type: "eq",
      data: [
        { type: "math", content: "E = mc^2", showAt: 0 },
        { type: "spText", content: "Einstein" },
        { type: "text", content: "Final", showAt: 5 }
      ]
    }
  ]
};

describe("EQ grouping", () => {
  it("attaches spItems to previous line", () => {
    const player = new Player(eqDeck);
    const frame = player.getFrameByIndex(0);

    expect(frame.regions.lines.length).toBe(2);
    expect(frame.regions.lines[0].spItems.length).toBe(1);
  });
});
