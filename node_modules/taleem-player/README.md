
# ðŸ§  `@taleem/player`

**Version:** v1.0.0
**Status:** STABLE
**Scope:** Slide interpretation (NO UI)
**Depends on:** `deck-v1` (from `taleem-core`)
**Renders:** âŒ Nothing

---

## Purpose

`@taleem/player` is the **semantic interpreter** for Taleem slide decks.

It takes a validated `deck-v1` document and answers one question only:

> **â€œWhat does this slide mean?â€**

It does **not** render HTML, does **not** touch the DOM, and does **not** know where or how slides will be displayed.

If you are looking for UI, CSS, animations, audio, or frameworks â€”
**you are in the wrong repository.**

---

## What this package DOES

`@taleem/player` is responsible for:

1. Interpreting slide **types** (`titleSlide`, `eq`, `twoColumnText`, â€¦)
2. Grouping **flat slide data** into semantic regions
3. Enforcing **slide meaning contracts**
4. Producing **render-ready frames** (pure data)
5. Failing loudly on unsupported slide types

It is the **single authority** on what a slide *means*.

---

## What this package does NOT do

This package intentionally does **NOT**:

* Render HTML
* Use `document`, `window`, or the DOM
* Load files or URLs
* Manage time loops or playback
* Handle user input
* Know about CSS, layouts, or screen sizes
* Store state or progress
* Perform validation (thatâ€™s `taleem-core`)

If you feel tempted to add any of the above here â€” stop.

---

## Architectural position

```
Deck JSON (deck-v1)
        â†“
   taleem-core
        â†“
   @taleem/player
        â†“
 Renderer (web / pdf / video / cli)
```

The Player **sits between content and rendering**.

* Everything above it can change.
* Everything below it can change.
* The Player must remain **pure and stable**.

---

## Mental model (IMPORTANT)

> **Slides are documents, not components.**
> **The Player interprets.**
> **Renderers paint.**

This repository exists because violating that boundary causes years of pain.

---

## Public API

### Import

```js
import { Player } from "@taleem/player";
```

---

### Creating a Player

```js
const player = new Player(deck);
```

Where `deck` is a valid `deck-v1` document.

---

### Frame generation (index-based)

```js
const frame = player.getFrameByIndex(0);
```

Returns a **render instruction**:

```js
{
  type: "titleSlide",
  regions: {
    title: "Angles and Transversals"
  },
  meta: {
    start: 0,
    end: 10
  }
}
```

* `type` â†’ slide semantic type
* `regions` â†’ grouped, interpreted data
* `meta` â†’ timing metadata (passed through, not used)

---

### Time-based access (future / optional)

```js
const frame = player.getFrame(timeInSeconds);
```

Time support exists but is **not required** for basic rendering.
Navigation and playback loops live **outside** the Player.

---

## Slide semantics (core responsibility)

### Example: `twoColumnText`

Input (flat):

```js
[
  { name: "title", content: "Topic", showAt: 0 },
  { name: "left", content: "Left text", showAt: 1 },
  { name: "right", content: "Right text", showAt: 2 }
]
```

Output (interpreted):

```js
{
  title: "Topic",
  left: ["Left text"],
  right: ["Right text"]
}
```

The **grouping logic lives here**, not in the renderer.

---

## EQ slide support (gold standard)

This Player fully supports the **flat EQ authoring model** defined in `eq.md`.

Key rules (frozen):

* EQ input is a **flat array**
* Non-`sp*` items start a new line
* All following `sp*` items attach to the last line
* Sidebars are semantic, not structural

This logic is implemented and **covered by tests**.

---

## Tests and trust

This package has automated tests that verify:

* Basic frame generation
* Index-based navigation
* EQ sidebar grouping behavior
* Boundary enforcement

If tests pass:

* the Player is correct
* slide meaning is stable
* future refactors are safe

---

## Design rules (DO NOT BREAK)

1. No DOM access
2. No renderer imports
3. No CSS
4. No framework assumptions
5. No silent behavior changes
6. No auto-mutation of decks
7. New slide types require **explicit Player support**

If a new slide type appears in a deck and the Player does not support it,
**the Player must throw**.

Silent fallbacks are forbidden.

---

## Relationship to other packages

* **`taleem-core`**
  Defines *what a deck is* and *how time maps to slides*

* **`@taleem/player`** (this repo)
  Defines *what slides mean*

* **Renderers (web / pdf / video)**
  Define *how slides look*

This separation is intentional and permanent.

---

## When to modify this repo

Only modify `@taleem/player` if:

* a new slide semantic is introduced
* an existing slide semantic is incorrect
* tests reveal a broken interpretation rule

If you are adding UI features â€” you are in the wrong repo.

---

## Final warning (read twice)

> **A previous version of this system failed because UI logic leaked into the Player.
> This repository exists to make that mistake impossible.**

Treat this README as **law**, not guidance.

---

## Status

âœ” Boundaries enforced
âœ” Tests passing
âœ” Semantics stable
âœ” Ready for long-term use

This is a **completed deliverable**.

