import {
  __privateAdd,
  __privateGet,
  __privateSet
} from "./chunk-3W5G4CYI.js";

// node_modules/taleem-browser/dist/taleem-browser.esm.js
var TitleSlide = {
  type: "titleSlide",
  /**
   * Build a TitleSlide from raw deck JSON
   */
  fromJSON(rawSlide, index) {
    if (!Array.isArray(rawSlide.data)) {
      throw new Error(`TitleSlide: data must be an array`);
    }
    const titleItem = rawSlide.data.find((d) => d.name === "title");
    if (!titleItem || typeof titleItem.content !== "string") {
      throw new Error(`TitleSlide: missing or invalid title content`);
    }
    const title = titleItem.content;
    return Object.freeze({
      type: "titleSlide",
      render() {
        return `
            <div class="slide titleSlide">
              <h1>${title}</h1>
            </div>
          `;
      }
    });
  }
};
var TitleAndSubtitleSlide = {
  type: "titleAndSubtitle",
  fromJSON(raw) {
    var _a2, _b, _c, _d;
    const title = (_b = (_a2 = raw.data) == null ? void 0 : _a2.find((d) => d.name === "title")) == null ? void 0 : _b.content;
    const subtitle = (_d = (_c = raw.data) == null ? void 0 : _c.find((d) => d.name === "subtitle")) == null ? void 0 : _d.content;
    if (!title || !subtitle) {
      throw new Error("titleAndSubtitle: requires title and subtitle");
    }
    return Object.freeze({
      type: "titleAndSubtitle",
      render() {
        return `
            <section class="slide titleAndSubtitle">
              <h1>${title}</h1>
              <h2>${subtitle}</h2>
            </section>
          `;
      }
    });
  }
};
var TitleAndParaSlide = {
  type: "titleAndPara",
  fromJSON(raw) {
    var _a2, _b, _c, _d;
    const title = (_b = (_a2 = raw.data) == null ? void 0 : _a2.find((d) => d.name === "title")) == null ? void 0 : _b.content;
    const para = (_d = (_c = raw.data) == null ? void 0 : _c.find((d) => d.name === "para")) == null ? void 0 : _d.content;
    if (!title || !para) {
      throw new Error("titleAndPara: requires title and para");
    }
    return Object.freeze({
      type: "titleAndPara",
      render() {
        return `
            <section class="slide titleAndPara">
              <h1>${title}</h1>
              <p>${para}</p>
            </section>
          `;
      }
    });
  }
};
var BulletListSlide = {
  type: "bulletList",
  fromJSON(raw) {
    var _a2;
    const bullets = (_a2 = raw.data) == null ? void 0 : _a2.filter((d) => d.name === "bullet").map((d) => d.content);
    if (!bullets || bullets.length === 0) {
      throw new Error("bulletList: requires at least one bullet");
    }
    return Object.freeze({
      type: "bulletList",
      render() {
        return `
            <section class="slide bulletList">
              <ul>
                ${bullets.map((b) => `<li>${b}</li>`).join("")}
              </ul>
            </section>
          `;
      }
    });
  }
};
var TwoColumnTextSlide = {
  type: "twoColumnText",
  fromJSON(raw) {
    var _a2, _b;
    const left = (_a2 = raw.data) == null ? void 0 : _a2.filter((d) => d.name === "left").map((d) => d.content);
    const right = (_b = raw.data) == null ? void 0 : _b.filter((d) => d.name === "right").map((d) => d.content);
    if (!(left == null ? void 0 : left.length) || !(right == null ? void 0 : right.length)) {
      throw new Error("twoColumnText: requires left and right columns");
    }
    return Object.freeze({
      type: "twoColumnText",
      render() {
        return `
            <section class="slide twoColumnText">
              <div class="col left">${left.join("<br/>")}</div>
              <div class="col right">${right.join("<br/>")}</div>
            </section>
          `;
      }
    });
  }
};
var ImageSlide = {
  type: "imageSlide",
  fromJSON(raw) {
    var _a2, _b;
    const src = (_b = (_a2 = raw.data) == null ? void 0 : _a2.find((d) => d.name === "image")) == null ? void 0 : _b.content;
    if (!src)
      throw new Error("imageSlide: image required");
    return Object.freeze({
      type: "imageSlide",
      render() {
        return `
            <section class="slide imageSlide">
              <img src="${src}" alt="" />
            </section>
          `;
      }
    });
  }
};
var FillImageSlide = {
  type: "fillImage",
  fromJSON(raw) {
    var _a2, _b;
    const image = (_b = (_a2 = raw.data) == null ? void 0 : _a2.find((d) => d.name === "image")) == null ? void 0 : _b.content;
    if (!image) {
      throw new Error("fillImage: image required");
    }
    return Object.freeze({
      type: "fillImage",
      render() {
        return `
            <section class="slide fillImage">
              <img src="${image}" alt="" />
            </section>
          `;
      }
    });
  }
};
var ImageWithTitleSlide = {
  type: "imageWithTitle",
  fromJSON(raw) {
    var _a2, _b, _c, _d;
    const src = (_b = (_a2 = raw.data) == null ? void 0 : _a2.find((d) => d.name === "image")) == null ? void 0 : _b.content;
    const title = (_d = (_c = raw.data) == null ? void 0 : _c.find((d) => d.name === "title")) == null ? void 0 : _d.content;
    if (!src || !title) {
      throw new Error("imageWithTitle: image and title required");
    }
    return Object.freeze({
      type: "imageWithTitle",
      render() {
        return `
            <section class="slide imageWithTitle">
              <img src="${src}" alt="" />
              <h1>${title}</h1>
            </section>
          `;
      }
    });
  }
};
var ImageWithCaptionSlide = {
  type: "imageWithCaption",
  fromJSON(raw) {
    var _a2, _b, _c, _d;
    const src = (_b = (_a2 = raw.data) == null ? void 0 : _a2.find((d) => d.name === "image")) == null ? void 0 : _b.content;
    const caption = (_d = (_c = raw.data) == null ? void 0 : _c.find((d) => d.name === "caption")) == null ? void 0 : _d.content;
    if (!src || !caption) {
      throw new Error("imageWithCaption: image and caption required");
    }
    return Object.freeze({
      type: "imageWithCaption",
      render() {
        return `
            <figure class="slide imageWithCaption">
              <img src="${src}" alt="" />
              <figcaption>${caption}</figcaption>
            </figure>
          `;
      }
    });
  }
};
var ImageLeftBulletsRightSlide = {
  type: "imageLeftBulletsRight",
  fromJSON(raw) {
    var _a2, _b, _c;
    const image = (_b = (_a2 = raw.data) == null ? void 0 : _a2.find((d) => d.name === "image")) == null ? void 0 : _b.content;
    const bullets = (_c = raw.data) == null ? void 0 : _c.filter((d) => d.name === "bullet").map((d) => d.content);
    if (!image || !(bullets == null ? void 0 : bullets.length)) {
      throw new Error("imageLeftBulletsRight: image and bullets required");
    }
    return Object.freeze({
      type: "imageLeftBulletsRight",
      render() {
        return `
            <section class="slide imageLeftBulletsRight">
              <img src="${image}" alt="" />
              <ul>
                ${bullets.map((b) => `<li>${b}</li>`).join("")}
              </ul>
            </section>
          `;
      }
    });
  }
};
var ImageRightBulletsLeftSlide = {
  type: "imageRightBulletsLeft",
  fromJSON(raw) {
    var _a2, _b, _c;
    const image = (_b = (_a2 = raw.data) == null ? void 0 : _a2.find((d) => d.name === "image")) == null ? void 0 : _b.content;
    const bullets = (_c = raw.data) == null ? void 0 : _c.filter((d) => d.name === "bullet").map((d) => d.content);
    if (!image || !(bullets == null ? void 0 : bullets.length)) {
      throw new Error("imageRightBulletsLeft: image and bullets required");
    }
    return Object.freeze({
      type: "imageRightBulletsLeft",
      render() {
        return `
            <section class="slide imageRightBulletsLeft">
              <ul>
                ${bullets.map((b) => `<li>${b}</li>`).join("")}
              </ul>
              <img src="${image}" alt="" />
            </section>
          `;
      }
    });
  }
};
var TableSlide = {
  type: "table",
  fromJSON(raw) {
    var _a2;
    const rows = (_a2 = raw.data) == null ? void 0 : _a2.filter((d) => d.name === "row").map((d) => d.content);
    if (!rows || rows.length === 0) {
      throw new Error("table: requires at least one row");
    }
    return Object.freeze({
      type: "table",
      render() {
        return `
            <table class="slide table">
              ${rows.map(
          (row) => `<tr>${row.map((cell) => `<td>${cell}</td>`).join("")}</tr>`
        ).join("")}
            </table>
          `;
      }
    });
  }
};
var StatisticSlide = {
  type: "statistic",
  fromJSON(raw) {
    var _a2, _b, _c, _d;
    const label = (_b = (_a2 = raw.data) == null ? void 0 : _a2.find((d) => d.name === "label")) == null ? void 0 : _b.content;
    const value = (_d = (_c = raw.data) == null ? void 0 : _c.find((d) => d.name === "value")) == null ? void 0 : _d.content;
    if (!label || value === void 0) {
      throw new Error("statistic: requires label and value");
    }
    return Object.freeze({
      type: "statistic",
      render() {
        return `
            <section class="slide statistic">
              <div class="stat-value">${value}</div>
              <div class="stat-label">${label}</div>
            </section>
          `;
      }
    });
  }
};
var BigNumberSlide = {
  type: "bigNumber",
  fromJSON(raw) {
    var _a2, _b, _c, _d;
    const value = (_b = (_a2 = raw.data) == null ? void 0 : _a2.find((d) => d.name === "number")) == null ? void 0 : _b.content;
    const label = (_d = (_c = raw.data) == null ? void 0 : _c.find((d) => d.name === "label")) == null ? void 0 : _d.content;
    if (!value)
      throw new Error("bigNumber: number required");
    return Object.freeze({
      type: "bigNumber",
      render() {
        return `
            <section class="slide bigNumber">
              <div class="number">${value}</div>
              ${label ? `<div class="label">${label}</div>` : ""}
            </section>
          `;
      }
    });
  }
};
var BarChartSlide = {
  type: "barChart",
  fromJSON(raw) {
    var _a2;
    const bars = (_a2 = raw.data) == null ? void 0 : _a2.filter((d) => d.name === "bar");
    if (!bars || bars.length === 0) {
      throw new Error("barChart: requires at least one bar");
    }
    bars.forEach((b, i) => {
      if (typeof b.content !== "object" || typeof b.content.label !== "string" || typeof b.content.value !== "number") {
        throw new Error(`barChart: invalid bar at index ${i}`);
      }
    });
    return Object.freeze({
      type: "barChart",
      render() {
        return `
            <section class="slide barChart">
              <ul class="bars">
                ${bars.map(
          (b) => `
                    <li class="bar">
                      <span class="bar-label">${b.content.label}</span>
                      <span class="bar-value">${b.content.value}</span>
                    </li>
                  `
        ).join("")}
              </ul>
            </section>
          `;
      }
    });
  }
};
var DonutChartSlide = {
  type: "donutChart",
  fromJSON(raw) {
    var _a2;
    const segments = (_a2 = raw.data) == null ? void 0 : _a2.filter((d) => d.name === "segment");
    if (!segments || segments.length === 0) {
      throw new Error("donutChart: requires at least one segment");
    }
    return Object.freeze({
      type: "donutChart",
      render() {
        return `
            <section class="slide donutChart">
              <ul>
                ${segments.map(
          (s) => `<li>${s.content.label}: ${s.content.value}</li>`
        ).join("")}
              </ul>
            </section>
          `;
      }
    });
  }
};
var QuoteSlide = {
  type: "quoteSlide",
  fromJSON(raw) {
    var _a2, _b, _c, _d;
    const text = (_b = (_a2 = raw.data) == null ? void 0 : _a2.find((d) => d.name === "quote")) == null ? void 0 : _b.content;
    const author = (_d = (_c = raw.data) == null ? void 0 : _c.find((d) => d.name === "author")) == null ? void 0 : _d.content;
    if (!text)
      throw new Error("quoteSlide: quote required");
    return Object.freeze({
      type: "quoteSlide",
      render() {
        return `
            <blockquote class="slide quoteSlide">
              <p>${text}</p>
              ${author ? `<footer>${author}</footer>` : ""}
            </blockquote>
          `;
      }
    });
  }
};
var QuoteWithImageSlide = {
  type: "quoteWithImage",
  fromJSON(raw) {
    var _a2, _b, _c, _d, _e, _f;
    const quote = (_b = (_a2 = raw.data) == null ? void 0 : _a2.find((d) => d.name === "quote")) == null ? void 0 : _b.content;
    const image = (_d = (_c = raw.data) == null ? void 0 : _c.find((d) => d.name === "image")) == null ? void 0 : _d.content;
    const author = (_f = (_e = raw.data) == null ? void 0 : _e.find((d) => d.name === "author")) == null ? void 0 : _f.content;
    if (!quote || !image) {
      throw new Error("quoteWithImage: quote and image required");
    }
    return Object.freeze({
      type: "quoteWithImage",
      render() {
        return `
            <section class="slide quoteWithImage">
              <img src="${image}" alt="" />
              <blockquote>
                <p>${quote}</p>
                ${author ? `<footer>${author}</footer>` : ""}
              </blockquote>
            </section>
          `;
      }
    });
  }
};
var CornerWordsSlide = {
  type: "cornerWordsSlide",
  fromJSON(raw) {
    var _a2;
    const words = (_a2 = raw.data) == null ? void 0 : _a2.filter((d) => d.name === "word").map((d) => d.content);
    if (!words || words.length === 0) {
      throw new Error("cornerWordsSlide: requires at least one word");
    }
    return Object.freeze({
      type: "cornerWordsSlide",
      render() {
        return `
            <section class="slide cornerWordsSlide">
              ${words.map(
          (w, i) => `<span class="corner-word corner-${i + 1}">${w}</span>`
        ).join("")}
            </section>
          `;
      }
    });
  }
};
var ContactSlide = {
  type: "contactSlide",
  fromJSON(raw) {
    var _a2;
    const items = (_a2 = raw.data) == null ? void 0 : _a2.map((d) => `<div>${d.content}</div>`);
    if (!(items == null ? void 0 : items.length))
      throw new Error("contactSlide: content required");
    return Object.freeze({
      type: "contactSlide",
      render() {
        return `
            <section class="slide contactSlide">
              ${items.join("")}
            </section>
          `;
      }
    });
  }
};
var EqSlide = {
  type: "eq",
  fromJSON(raw) {
    if (!Array.isArray(raw.data)) {
      throw new Error("eq: data must be array");
    }
    return Object.freeze({
      type: "eq",
      render() {
        return `
            <section class="slide eq">
              ${raw.data.map((d) => `<div>${d.content}</div>`).join("")}
            </section>
          `;
      }
    });
  }
};
var SvgPointerSlide = {
  type: "svgPointer",
  fromJSON(raw) {
    var _a2, _b;
    const svg = (_b = (_a2 = raw.data) == null ? void 0 : _a2.find((d) => d.name === "svg")) == null ? void 0 : _b.content;
    if (!svg)
      throw new Error("svgPointer: svg required");
    return Object.freeze({
      type: "svgPointer",
      render() {
        return `
            <section class="slide svgPointer">
              ${svg}
            </section>
          `;
      }
    });
  }
};
var registry = {
  titleSlide: TitleSlide,
  titleAndSubtitle: TitleAndSubtitleSlide,
  titleAndPara: TitleAndParaSlide,
  bulletList: BulletListSlide,
  twoColumnText: TwoColumnTextSlide,
  imageSlide: ImageSlide,
  fillImage: FillImageSlide,
  imageWithTitle: ImageWithTitleSlide,
  imageWithCaption: ImageWithCaptionSlide,
  imageLeftBulletsRight: ImageLeftBulletsRightSlide,
  imageRightBulletsLeft: ImageRightBulletsLeftSlide,
  table: TableSlide,
  statistic: StatisticSlide,
  bigNumber: BigNumberSlide,
  barChart: BarChartSlide,
  donutChart: DonutChartSlide,
  quoteSlide: QuoteSlide,
  quoteWithImage: QuoteWithImageSlide,
  cornerWordsSlide: CornerWordsSlide,
  contactSlide: ContactSlide,
  eq: EqSlide,
  svgPointer: SvgPointerSlide
};
var _slides, _a;
var SlideManager = (_a = class {
  constructor(slides) {
    __privateAdd(this, _slides, void 0);
    if (!Array.isArray(slides)) {
      throw new Error("SlideManager: slides must be an array");
    }
    __privateSet(this, _slides, slides);
  }
  /**
   * Render a single slide by index.
   *
   * @param {number} index
   * @param {number} [showAt]
   * @returns {string} HTML
   */
  renderSlide(index, showAt) {
    const slide = __privateGet(this, _slides)[index];
    if (!slide) {
      throw new Error(`SlideManager: invalid slide index ${index}`);
    }
    if (typeof slide.render !== "function") {
      throw new Error(
        `SlideManager: slide at index ${index} has no render() method`
      );
    }
    return slide.render(showAt);
  }
  /**
   * Render all slides as a static HTML dump.
   *
   * @returns {string} HTML
   */
  renderAll() {
    return __privateGet(this, _slides).map((slide, index) => {
      if (typeof slide.render !== "function") {
        throw new Error(
          `SlideManager: slide at index ${index} has no render() method`
        );
      }
      return slide.render();
    }).join("\n");
  }
}, _slides = new WeakMap(), _a);
function slideBuilder(deckV1Json) {
  if (!deckV1Json || typeof deckV1Json !== "object") {
    throw new Error("slideBuilder: input must be an object");
  }
  if (deckV1Json.version !== "deck-v1") {
    throw new Error(
      `slideBuilder: unsupported deck version "${deckV1Json.version}"`
    );
  }
  if (!Array.isArray(deckV1Json.deck)) {
    throw new Error("slideBuilder: deck must be an array");
  }
  const slides = deckV1Json.deck.map((rawSlide, index) => {
    if (!rawSlide || typeof rawSlide !== "object") {
      throw new Error(`slideBuilder: slide ${index} is not an object`);
    }
    const { type } = rawSlide;
    if (!type || typeof type !== "string") {
      throw new Error(`slideBuilder: slide ${index} has no valid type`);
    }
    const builder = registry[type];
    if (!builder) {
      throw new Error(
        `slideBuilder: unsupported slide type "${type}" at index ${index}`
      );
    }
    try {
      return builder.fromJSON(rawSlide, index);
    } catch (err) {
      throw new Error(
        `slideBuilder: failed to build slide "${type}" at index ${index}
${err.message}`
      );
    }
  });
  slides.forEach(Object.freeze);
  Object.freeze(slides);
  return new SlideManager(slides);
}
var TALEEM_BROWSER_VERSION = "0.1.3";
var TALEEM_CSS_URL = "https://github.com/bilza2023/taleem-browser/releases/download/v0.1.3/taleem.css";
function createTaleemBrowser({ mount, deck }) {
  if (!mount) {
    throw new Error("taleem-browser: mount is required");
  }
  if (!deck || !Array.isArray(deck.deck)) {
    throw new Error("taleem-browser: valid deck object required");
  }
  const root = typeof mount === "string" ? document.querySelector(mount) : mount;
  if (!root) {
    throw new Error("taleem-browser: mount element not found");
  }
  let currentIndex = 0;
  const total = deck.deck.length;
  root.innerHTML = `
    <div class="taleem-browser-bg"></div>
    <div class="taleem-browser-slide"></div>
  `;
  const bgEl = root.querySelector(".taleem-browser-bg");
  const slideEl = root.querySelector(".taleem-browser-slide");
  applyBackground(bgEl, deck.background);
  const manager = slideBuilder(deck);
  function render() {
    slideEl.innerHTML = manager.renderSlide(currentIndex);
  }
  function next() {
    if (currentIndex < total - 1) {
      currentIndex++;
      render();
    }
  }
  function prev() {
    if (currentIndex > 0) {
      currentIndex--;
      render();
    }
  }
  function goTo(index) {
    if (index < 0 || index >= total)
      return;
    currentIndex = index;
    render();
  }
  function getIndex() {
    return currentIndex;
  }
  function getTotal() {
    return total;
  }
  function destroy() {
    root.innerHTML = "";
  }
  render();
  return {
    next,
    prev,
    goTo,
    getIndex,
    getTotal,
    render,
    destroy
  };
}
function applyBackground(el, bg = {}) {
  el.style.position = "absolute";
  el.style.inset = "0";
  el.style.zIndex = "0";
  el.style.backgroundColor = bg.backgroundColor || "#000";
  el.style.backgroundImage = bg.backgroundImage ? `url(${bg.backgroundImage})` : "none";
  el.style.backgroundSize = "cover";
  el.style.backgroundPosition = "center";
  el.style.opacity = bg.backgroundImageOpacity !== void 0 ? bg.backgroundImageOpacity : 1;
}
export {
  TALEEM_BROWSER_VERSION,
  TALEEM_CSS_URL,
  createTaleemBrowser
};
//# sourceMappingURL=taleem-browser.js.map
