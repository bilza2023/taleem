{
  "version": 3,
  "sources": ["../../taleem-player/dist/taleem-player.esm.js"],
  "sourcesContent": ["// src/core/stage.js\nfunction createStage(mount) {\n  if (!mount) throw new Error(\"taleem-player: mount is required\");\n  const root = typeof mount === \"string\" ? document.querySelector(mount) : mount;\n  if (!root) throw new Error(\"taleem-player: mount element not found\");\n  root.innerHTML = \"\";\n  const stage = document.createElement(\"div\");\n  stage.className = \"taleem-player-stage\";\n  stage.style.position = \"relative\";\n  stage.style.width = \"100%\";\n  stage.style.height = \"100%\";\n  root.appendChild(stage);\n  function clear() {\n    stage.innerHTML = \"\";\n  }\n  function destroy() {\n    root.innerHTML = \"\";\n  }\n  return {\n    el: stage,\n    clear,\n    destroy\n  };\n}\n\n// src/utils/timing.js\nfunction getDeckDuration(deck) {\n  if (!deck?.deck?.length) return 0;\n  return Math.max(...deck.deck.map((s) => s.end));\n}\nfunction getSlideAtTime(deck, time) {\n  return deck.deck.find((s) => time >= s.start && time < s.end) || null;\n}\n\n// src/utils/assertPlayable.js\nfunction assertDeckPlayable(deck) {\n  if (!deck || deck.version !== \"deck-v1\") {\n    throw new Error(\"Invalid deck version\");\n  }\n  if (!Array.isArray(deck.deck)) {\n    throw new Error(\"Deck must contain slides\");\n  }\n  deck.deck.forEach((s, i) => {\n    if (typeof s.start !== \"number\" || typeof s.end !== \"number\") {\n      throw new Error(`Slide ${i} has invalid timing`);\n    }\n    if (s.end <= s.start) {\n      throw new Error(`Slide ${i} end must be > start`);\n    }\n  });\n  return true;\n}\n\n// src/core/player.js\nfunction createTaleemPlayer({ mount, deck, renderer }) {\n  if (!renderer || typeof renderer.render !== \"function\") {\n    throw new Error(\"taleem-player: renderer with render() required\");\n  }\n  assertDeckPlayable(deck);\n  const stage = createStage(mount);\n  let lastSlide = null;\n  function renderAt(time) {\n    const slide = getSlideAtTime(deck, time);\n    if (!slide) {\n      stage.clear();\n      lastSlide = null;\n      return;\n    }\n    if (slide !== lastSlide) {\n      stage.clear();\n      lastSlide = slide;\n    }\n    renderer.render({\n      mount: stage.el,\n      slide,\n      time\n    });\n  }\n  function destroy() {\n    stage.destroy();\n  }\n  return {\n    renderAt,\n    destroy\n  };\n}\nexport {\n  assertDeckPlayable,\n  createTaleemPlayer,\n  getDeckDuration,\n  getSlideAtTime\n};\n"],
  "mappings": ";AACA,SAAS,YAAY,OAAO;AAC1B,MAAI,CAAC;AAAO,UAAM,IAAI,MAAM,kCAAkC;AAC9D,QAAM,OAAO,OAAO,UAAU,WAAW,SAAS,cAAc,KAAK,IAAI;AACzE,MAAI,CAAC;AAAM,UAAM,IAAI,MAAM,wCAAwC;AACnE,OAAK,YAAY;AACjB,QAAM,QAAQ,SAAS,cAAc,KAAK;AAC1C,QAAM,YAAY;AAClB,QAAM,MAAM,WAAW;AACvB,QAAM,MAAM,QAAQ;AACpB,QAAM,MAAM,SAAS;AACrB,OAAK,YAAY,KAAK;AACtB,WAAS,QAAQ;AACf,UAAM,YAAY;AAAA,EACpB;AACA,WAAS,UAAU;AACjB,SAAK,YAAY;AAAA,EACnB;AACA,SAAO;AAAA,IACL,IAAI;AAAA,IACJ;AAAA,IACA;AAAA,EACF;AACF;AAGA,SAAS,gBAAgB,MAAM;AA1B/B;AA2BE,MAAI,GAAC,kCAAM,SAAN,mBAAY;AAAQ,WAAO;AAChC,SAAO,KAAK,IAAI,GAAG,KAAK,KAAK,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC;AAChD;AACA,SAAS,eAAe,MAAM,MAAM;AAClC,SAAO,KAAK,KAAK,KAAK,CAAC,MAAM,QAAQ,EAAE,SAAS,OAAO,EAAE,GAAG,KAAK;AACnE;AAGA,SAAS,mBAAmB,MAAM;AAChC,MAAI,CAAC,QAAQ,KAAK,YAAY,WAAW;AACvC,UAAM,IAAI,MAAM,sBAAsB;AAAA,EACxC;AACA,MAAI,CAAC,MAAM,QAAQ,KAAK,IAAI,GAAG;AAC7B,UAAM,IAAI,MAAM,0BAA0B;AAAA,EAC5C;AACA,OAAK,KAAK,QAAQ,CAAC,GAAG,MAAM;AAC1B,QAAI,OAAO,EAAE,UAAU,YAAY,OAAO,EAAE,QAAQ,UAAU;AAC5D,YAAM,IAAI,MAAM,SAAS,CAAC,qBAAqB;AAAA,IACjD;AACA,QAAI,EAAE,OAAO,EAAE,OAAO;AACpB,YAAM,IAAI,MAAM,SAAS,CAAC,sBAAsB;AAAA,IAClD;AAAA,EACF,CAAC;AACD,SAAO;AACT;AAGA,SAAS,mBAAmB,EAAE,OAAO,MAAM,SAAS,GAAG;AACrD,MAAI,CAAC,YAAY,OAAO,SAAS,WAAW,YAAY;AACtD,UAAM,IAAI,MAAM,gDAAgD;AAAA,EAClE;AACA,qBAAmB,IAAI;AACvB,QAAM,QAAQ,YAAY,KAAK;AAC/B,MAAI,YAAY;AAChB,WAAS,SAAS,MAAM;AACtB,UAAM,QAAQ,eAAe,MAAM,IAAI;AACvC,QAAI,CAAC,OAAO;AACV,YAAM,MAAM;AACZ,kBAAY;AACZ;AAAA,IACF;AACA,QAAI,UAAU,WAAW;AACvB,YAAM,MAAM;AACZ,kBAAY;AAAA,IACd;AACA,aAAS,OAAO;AAAA,MACd,OAAO,MAAM;AAAA,MACb;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH;AACA,WAAS,UAAU;AACjB,UAAM,QAAQ;AAAA,EAChB;AACA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,EACF;AACF;",
  "names": []
}
