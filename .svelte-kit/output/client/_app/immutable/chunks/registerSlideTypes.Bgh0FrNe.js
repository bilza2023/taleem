var x=Object.defineProperty;var F=(S,E,n)=>E in S?x(S,E,{enumerable:!0,configurable:!0,writable:!0,value:n}):S[E]=n;var e=(S,E,n)=>F(S,typeof E!="symbol"?E+"":E,n);import{s as U,f as k,a as K,p as W,b as Y,C as V,E as X,c as Z}from"./OpenFileButton.iOEySLtQ.js";async function q(){const S="system_images/bg_images/",E=["paper01.jpg","drywall.jpg","black_board.jpg","black_board_mat.jpg","wood.jpg","tinted.jpg","black_mat.jpg","white_mat.jpg","granite.jpg","gray_marble.jpg","brown_stone.jpg","gray_stone.jpg","design_old.jpg","blue_waves.jpg","wall.jpg"];async function n(u){return new Promise((o,A)=>{const d=new Image,v=S+u;d.onload=()=>o({name:v,img:d}),d.onerror=()=>A(new Error(`Failed to load image: ${v}`)),d.src=v})}try{return await Promise.all(E.map(u=>n(u)))}catch(u){throw console.error("Error loading background images:",u),u}}async function Q(){const S=[{name:"students",config:U},{name:"figs",config:k},{name:"alphabets",config:K},{name:"people",config:W}];async function E({name:n,config:u}){return new Promise((o,A)=>{const d=new Image;d.onload=()=>{u.img=d,o(u)},d.onerror=()=>A(new Error(`Failed to load sprite: ${n}`)),d.src=u.url})}try{return await Promise.all(S.map(n=>E(n)))}catch(n){throw console.error("Error loading sprites:",n),n}}class a{}e(a,"ADD"," ➕"),e(a,"ANGLE"," ∠"),e(a,"BALANCE","⚖️"),e(a,"BAZIER","🔷"),e(a,"BARCHART","📊"),e(a,"BOOK","📘"),e(a,"BOOKS","📚"),e(a,"BUS","🚌"),e(a,"BULB","💡"),e(a,"CAR","🚗"),e(a,"CANVAS","🖼️"),e(a,"CHARTUP","📈"),e(a,"CHARTDOWN","📉"),e(a,"CIRCLE","⭕"),e(a,"CLOCK","⏱️"),e(a,"COG","⚙"),e(a,"COMPUTER","💻"),e(a,"COPY","📋"),e(a,"CODE","📟"),e(a,"COLD","🥶"),e(a,"CROSS","❌"),e(a,"CLIP","📎"),e(a,"CLONE","🁜"),e(a,"DARK","🌃"),e(a,"DEL","🗑️"),e(a,"DOOR","🚪"),e(a,"DOT","🔘"),e(a,"DOWN","↓"),e(a,"EMAIL","📧"),e(a,"EYE","👁️"),e(a,"EYES","👀"),e(a,"EXPLOSION","💥"),e(a,"ELLIPSE","🥚"),e(a,"FILESBOX","🗃️"),e(a,"FLOWER","🌸"),e(a,"FROWNFACE","☹️"),e(a,"HAMMER_AND_WRENCH","🛠️"),e(a,"HEART","❤️"),e(a,"HIDE","🙈"),e(a,"HOT","🔥"),e(a,"HOURGLASS","⌛"),e(a,"HOUSE","🏠"),e(a,"ICE","🧊"),e(a,"KEY","🔑"),e(a,"LOCK","🔒"),e(a,"LEFT","←"),e(a,"LINE","➖"),e(a,"MAGNIFYING_GLASS","🔍"),e(a,"MANAGER","💼"),e(a,"MCQ","🔱"),e(a,"MESSAGE","📨"),e(a,"MICROSCOPE","🔬"),e(a,"NET","🌐"),e(a,"NOTES","📋"),e(a,"NUMBER","❶"),e(a,"PALETTE","🎨"),e(a,"PENCIL"," ✏️"),e(a,"PHONE","📱"),e(a,"QUESTIONMARK","❓"),e(a,"RULER","📏"),e(a,"RIGHT","→"),e(a,"RECYCLE","♻️"),e(a,"RECTANGLE","▭"),e(a,"RUN","🏃"),e(a,"ROCKET","🚀"),e(a,"SAVE","💾"),e(a,"SMILYFACE","😊"),e(a,"SPEECH","🗣️"),e(a,"SPEAKER","📢"),e(a,"NOSPEAKER","🔇"),e(a,"STAIRS","🪜"),e(a,"STAR","⭐"),e(a,"SHEEP","🐑"),e(a,"START","▶"),e(a,"STOP","||"),e(a,"STUDENT","👨‍🎓"),e(a,"SPRITE","🕹️"),e(a,"STUDENTCAP","🎓"),e(a,"SUN","☀️"),e(a,"SUNRISE","🌅"),e(a,"SUBTRACT","➖"),e(a,"TAG","🏷️"),e(a,"TEAM","🧑‍🤝‍🧑"),e(a,"TICK","✔️"),e(a,"TEMPRATURE","🌡️"),e(a,"TEMPLATE","📜"),e(a,"TEST","🧪"),e(a,"TEXT","📃"),e(a,"TEXT2","¶"),e(a,"THUMBSUP","👍"),e(a,"THUMBSDOWN","👎"),e(a,"TRIANGE","🔺"),e(a,"TRIANGULAR_RULER","📐"),e(a,"TREE","🌳"),e(a,"TV","📺"),e(a,"WRENCH","🔧"),e(a,"UP","↑"),e(a,"MONEYBAG","💰"),e(a,"MAGNET","🧲"),e(a,"MAGICWAND","🪄"),e(a,"MAP","🗺️"),e(a,"MEDAL","🎖️"),e(a,"MEGAPHONE","📣"),e(a,"MICROPHONE","🎤"),e(a,"MILK","🥛"),e(a,"MOON","🌙"),e(a,"MOUNTAIN","⛰️"),e(a,"MUSIC","🎵"),e(a,"NETWORK","🔗"),e(a,"NEWSPAPER","📰"),e(a,"NOTEBOOK","📓"),e(a,"OIL","🛢️"),e(a,"PANDA","🐼"),e(a,"PARACHUTE","🪂"),e(a,"PEACE","☮️"),e(a,"PENGUIN","🐧"),e(a,"PET","🐾"),e(a,"PIGGYBANK","🐖"),e(a,"PINEAPPLE","🍍"),e(a,"PIZZA","🍕"),e(a,"PLANET","🪐"),e(a,"PRINTER","🖨️"),e(a,"PUZZLE","🧩"),e(a,"QUILL","🖋️"),e(a,"RAINBOW","🌈"),e(a,"RECORD","🎙️"),e(a,"ROSE","🌹"),e(a,"SAILBOAT","⛵"),e(a,"SATELLITE","🛰️"),e(a,"SCISSORS","✂️"),e(a,"SCROLL","📜"),e(a,"SHIELD","🛡️"),e(a,"SNOWFLAKE","❄️"),e(a,"SQUIRREL","🐿️"),e(a,"SUITCASE","💼"),e(a,"SUNGLASSES","🕶️"),e(a,"SURFBOARD","🏄‍♂️"),e(a,"TADA","🎉"),e(a,"TEA","🍵"),e(a,"TELESCOPE","🔭"),e(a,"TENT","⛺"),e(a,"TOOLS","🛠️"),e(a,"TORNADO","🌪️"),e(a,"TROPHY","🏆"),e(a,"UMBRELLA","☂️"),e(a,"UNLOCK","🔓"),e(a,"VAN","🚐"),e(a,"VIAL","🧪"),e(a,"VIKING","🛡️"),e(a,"WALLET","👛"),e(a,"WATERMELON","🍉"),e(a,"WHALE","🐋"),e(a,"WIFI","📶"),e(a,"WIND","💨"),e(a,"WOLF","🐺"),e(a,"YIN_YANG","☯️"),e(a,"AIRPLANE","✈️"),e(a,"ALARM","⏰"),e(a,"APPLE","🍎"),e(a,"AVOCADO","🥑"),e(a,"BALLOON","🎈"),e(a,"BANANA","🍌"),e(a,"BATTERY","🔋"),e(a,"BEACH","🏖️"),e(a,"BELL","🔔"),e(a,"BICYCLE","🚲"),e(a,"BIRD","🐦"),e(a,"BIRTHDAY_CAKE","🎂"),e(a,"BOMB","💣"),e(a,"BOOKMARK","🔖"),e(a,"BOW_AND_ARROW","🏹"),e(a,"BRIEFCASE2","👜"),e(a,"BROOM","🧹"),e(a,"CACTUS","🌵"),e(a,"CALCULATOR","📟"),e(a,"CAMERA","📷"),e(a,"CANDY","🍬"),e(a,"CANDLE","🕯️"),e(a,"CARD","💳"),e(a,"CARROT","🥕"),e(a,"CAT","🐱"),e(a,"CHAMPAGNE","🍾"),e(a,"CHECK_MARK","✅"),e(a,"CHERRY","🍒"),e(a,"CHEESE","🧀"),e(a,"CHESS","♟️"),e(a,"CHICKEN","🐔"),e(a,"CLOUD","☁️"),e(a,"CLAPPERBOARD","🎬"),e(a,"COOKIE","🍪"),e(a,"CROWN","👑"),e(a,"CUPCAKE","🧁"),e(a,"CUTLERY","🍴"),e(a,"DAGGER","🗡️"),e(a,"DIAMOND","💎"),e(a,"DRUM","🥁"),e(a,"DUMBBELL","🏋️"),e(a,"ELEPHANT","🐘"),e(a,"ENVELOPE","✉️"),e(a,"FIREWORKS","🎆"),e(a,"FLAG","🚩"),e(a,"FLAME","🔥"),e(a,"FOOTBALL","⚽"),e(a,"FRIES","🍟"),e(a,"GEAR2","⚙️"),e(a,"GIFT","🎁"),e(a,"GLOBE","🌍"),e(a,"GUITAR","🎸"),e(a,"HANDSHAKE","🤝"),e(a,"HELICOPTER","🚁"),e(a,"HONEY","🍯"),e(a,"HURRICANE","🌀"),e(a,"ICE_CREAM","🍦"),e(a,"JAM","🍓"),e(a,"JUICE","🧃"),e(a,"KITE","🪁"),e(a,"LAMP","💡"),e(a,"LEMONADE","🍋"),e(a,"LIGHTNING","⚡"),e(a,"LOCKED_BOOK","🔏"),e(a,"LOUDSPEAKER","📢"),e(a,"LUNCHBOX","🍱"),e(a,"MAGNETIC_TAPE","📼"),e(a,"MAPLE_LEAF","🍁"),e(a,"MASK","🎭"),e(a,"MEDICINE","💊"),e(a,"METEOR","☄️"),e(a,"MOLECULE","🧬"),e(a,"MOUSE","🐭"),e(a,"MUSHROOM","🍄"),e(a,"NUT_AND_BOLT","🔩"),e(a,"OCTOPUS","🐙"),e(a,"ORANGE","🍊"),e(a,"OWL","🦉"),e(a,"PAW_PRINT","🐾"),e(a,"PENCIL2","🖊️"),e(a,"PILLOW","🛏️"),e(a,"PINE_TREE","🌲"),e(a,"POPCORN","🍿"),e(a,"RADAR","📡"),e(a,"ROBOT","🤖"),e(a,"RUBY","💍"),e(a,"SANDWICH","🥪"),e(a,"SATURN","🪐"),e(a,"SEA_SHELL","🐚"),e(a,"SHARK","🦈"),e(a,"SHOPPING_BAG","🛍️"),e(a,"SKULL","💀"),e(a,"SNORKEL","🤿"),e(a,"SPIDER","🕷️"),e(a,"SQUID","🦑"),e(a,"STETHOSCOPE","🩺"),e(a,"SWIMMING_POOL","🏊"),e(a,"SYRINGE","💉"),e(a,"TOOLBOX","🧰"),e(a,"TRAFFIC_LIGHT","🚦"),e(a,"TRAIN","🚆"),e(a,"TREE2","🌴"),e(a,"TRUCK","🚚"),e(a,"VAMPIRE","🧛"),e(a,"WATERMELON_SLICE","🍉"),e(a,"ABACUS","🧮"),e(a,"ALIEN","👽"),e(a,"AMPHORA","🏺"),e(a,"ANCHOR","⚓"),e(a,"ANT","🐜"),e(a,"ASTRONAUT","👨‍🚀"),e(a,"ATOM","⚛️"),e(a,"AXE","🪓"),e(a,"BACKPACK","🎒"),e(a,"BADMINTON","🏸"),e(a,"BAGEL","🥯"),e(a,"BAGUETTE","🥖"),e(a,"BAMBOO","🎍"),e(a,"BANJO","🪕"),e(a,"BASKET","🧺"),e(a,"BAT","🦇"),e(a,"BEAVER","🦫"),e(a,"BENTO","🍱"),e(a,"BIOHAZARD","☣️"),e(a,"BLUEBERRY","🫐"),e(a,"BOAR","🐗"),e(a,"BOBSLED","🛷"),e(a,"BONE","🦴"),e(a,"BONSAI","🎍"),e(a,"BOOMERANG","🪃"),e(a,"BRAIN","🧠"),e(a,"BREAD","🍞"),e(a,"BRICK","🧱"),e(a,"BRIDGE","🌉"),e(a,"BROCCOLI","🥦"),e(a,"BROOM_AND_BALL","🧹🏀"),e(a,"BUBBLE_TEA","🧋"),e(a,"BUCKET","🪣"),e(a,"BUTTERFLY","🦋"),e(a,"CACTUS_IN_POT","🌵🪴"),e(a,"CALENDAR","📅"),e(a,"CAMEL","🐪"),e(a,"CANOE","🛶"),e(a,"CASTLE","🏰"),e(a,"CHAINSAW","🪚"),e(a,"CHAIR","🪑"),e(a,"CHESTNUT","🌰"),e(a,"CHIPMUNK","🐿️"),e(a,"CHOCOLATE_BAR","🍫"),e(a,"CHOPSTICKS","🥢"),e(a,"CLAMP","🗜️"),e(a,"CLOVER","🍀"),e(a,"COCONUT","🥥"),e(a,"COFFIN","⚰️"),e(a,"COIN","🪙"),e(a,"COMET","☄️"),e(a,"COMPASS","🧭"),e(a,"CORAL","🪸"),e(a,"CORN","🌽"),e(a,"CRAYON","🖍️"),e(a,"CRICKET","🦗"),e(a,"CROCODILE","🐊"),e(a,"CROISSANT","🥐"),e(a,"CRYSTAL_BALL","🔮"),e(a,"CUCUMBER","🥒"),e(a,"CUPID","💘"),e(a,"CURLING_STONE","🥌"),e(a,"CYCLONE","🌀"),e(a,"DANGO","🍡"),e(a,"DART","🎯"),e(a,"DEER","🦌"),e(a,"DESKTOP","🖥️"),e(a,"DICE","🎲"),e(a,"DINOSAUR","🦕"),e(a,"DIVIDER","〰️"),e(a,"DNA","🧬"),e(a,"DONUT","🍩"),e(a,"DOVE","🕊️"),e(a,"DRAGON","🐉"),e(a,"DRILL","🛠️"),e(a,"DROPLET","💧"),e(a,"DUCK","🦆"),e(a,"DUMPLING","🥟"),e(a,"EAR","👂"),e(a,"EGGPLANT","🍆"),e(a,"ELF","🧝"),e(a,"EVERGREEN","🌲"),e(a,"FAIRY","🧚"),e(a,"FALLEN_LEAF","🍂"),e(a,"FEATHER","🪶"),e(a,"FERRIS_WHEEL","🎡"),e(a,"FIRE_EXTINGUISHER","🧯"),e(a,"FIRECRACKER","🧨"),e(a,"FISHING_POLE","🎣"),e(a,"FLEUR_DE_LIS","⚜️"),e(a,"FLYING_DISC","🥏"),e(a,"FLYING_SAUCER","🛸"),e(a,"FOG","🌫️"),e(a,"FONDUE","🫕"),e(a,"FOOTPRINTS","👣"),e(a,"FOUNTAIN","⛲"),e(a,"FOX","🦊"),e(a,"FROG","🐸"),e(a,"GARLIC","🧄"),e(a,"GENIE","🧞"),e(a,"GERM","🦠"),e(a,"GHOST","👻"),e(a,"GIRAFFE","🦒"),e(a,"GLOVES","🧤"),e(a,"GOAT","🐐"),e(a,"GORILLA","🦍"),e(a,"GRAPES","🍇"),e(a,"GRASSHOPPER","🦗"),e(a,"HAMSA","🧿"),e(a,"HARMONICA","🎹"),e(a,"HEADSTONE","🪦"),e(a,"HEDGEHOG","🦔"),e(a,"HERB","🌿"),e(a,"HIBISCUS","🌺"),e(a,"HIPPOPOTAMUS","🦛"),e(a,"HOOK","🪝"),e(a,"HOURGLASS_DONE","⌛"),e(a,"IGLOO","�iglq"),e(a,"INFINITY","♾️"),e(a,"JELLYFISH","🪼"),e(a,"JIGSAW","🧩"),e(a,"JOYSTICK","🕹️"),e(a,"KANGAROO","🦘"),e(a,"KIWI","🥝"),e(a,"KNOT","🪢"),e(a,"KOALA","🐨"),e(a,"LABCOAT","🥼"),e(a,"LADDER","🪜"),e(a,"LADYBUG","🐞"),e(a,"LASSO","🪃"),e(a,"LEMON","🍋"),e(a,"LEOPARD","🐆"),e(a,"LEVITATE","🕴️"),e(a,"LIGHT_BULB","💡"),e(a,"LIZARD","🦎"),e(a,"LLAMA","🦙"),e(a,"LOBSTER","🦞"),e(a,"LOLLIPOP","🍭"),e(a,"LOTUS","🪷"),e(a,"LUGGAGE","🧳"),e(a,"LUNGS","🫁"),e(a,"MAGE","🧙"),e(a,"MANGO","🥭"),e(a,"MANTIS","🦗"),e(a,"MICROBE","🦠"),e(a,"MIRROR","🪞"),e(a,"MOAI","🗿"),e(a,"MOLE","🐀"),e(a,"MONKEY","🐒"),e(a,"MOSQUITO","🦟"),e(a,"MOTOR_SCOOTER","🛵"),e(a,"MOTORCYCLE","🏍️"),e(a,"MOUNTAIN_CABLEWAY","🚠"),e(a,"NAZAR_AMULET","🧿"),e(a,"NECKTIE","👔"),e(a,"NESTING_DOLLS","🪆"),e(a,"NINJA","🥷"),e(a,"ONION","🧅"),e(a,"ORANGUTAN","🦧"),e(a,"OTTER","🦦"),e(a,"OYSTER","🦪"),e(a,"PACKAGE","📦"),e(a,"PAINTBRUSH","🖌️"),e(a,"PALM_TREE","🌴"),e(a,"PANCAKES","🥞"),e(a,"PAPERCLIP","📎"),e(a,"PARROT","🦜"),e(a,"PEACH","🍑"),e(a,"PEACOCK","🦚"),e(a,"PEANUTS","🥜"),e(a,"PEARL","🫠"),e(a,"PEAR","🍐"),e(a,"PENCIL_AND_PAPER","📝"),e(a,"PEPPER","🌶️"),e(a,"PETRI_DISH","🧫"),e(a,"PICKAXE","⛏️"),e(a,"PIEZO","🔊"),e(a,"PIGEON","🕊️"),e(a,"PILL","💊"),e(a,"PINATA","🪅"),e(a,"PINCH","🤏"),e(a,"PINEAPPLE_SLICE","🍍"),e(a,"PING_PONG","🏓"),e(a,"PIRATE","🏴‍☠️"),e(a,"PLANT_IN_POT","🪴"),e(a,"PLATYPUS","🦡"),e(a,"PLUNGER","🪠"),e(a,"POPCORN_BUCKET","🍿"),e(a,"POTATO","🥔"),e(a,"PRETZEL","🥨"),e(a,"PROTOZOA","🦠"),e(a,"PUMPKIN","🎃"),e(a,"PUSHPIN","📌"),e(a,"RABBIT","🐰"),e(a,"RACCOON","🦝"),e(a,"RADIO","📻"),e(a,"RAIL_CAR","🚃"),e(a,"RAINBOW_FLAG","🏳️‍🌈"),e(a,"RAMEN","🍜"),e(a,"RAT","🐀"),e(a,"RECEIPT","🧾"),e(a,"RHINOCEROS","🦏"),e(a,"RICE","🍚"),e(a,"RING_BUOY","🛟"),e(a,"ROCK","🪨"),e(a,"ROOSTER","🐓"),e(a,"SAFETY_PIN","🧷"),e(a,"SAFETY_VEST","🦺"),e(a,"SALT","🧂"),e(a,"SANDAL","👡"),e(a,"SATELLITE_ANTENNA","📡"),e(a,"SAUROPOD","🦕"),e(a,"SCALES","⚖️"),e(a,"SCARF","🧣"),e(a,"SCORPION","🦂"),e(a,"SCREWDRIVER","🪛"),e(a,"SEAL","🦭"),e(a,"SEEDLING","🌱"),e(a,"SHAMROCK","☘️"),e(a,"SHRIMP","🦐"),e(a,"SKUNK","🦨"),e(a,"SLED","🛷"),e(a,"SLOTH","🦥"),e(a,"SNAIL","🐌"),e(a,"SNAKE","🐍"),e(a,"SNOWBOARDER","🏂"),e(a,"SNOWMAN","☃️"),e(a,"SOAP","🧼"),e(a,"SOCCER_BALL","⚽"),e(a,"SOCKS","🧦"),e(a,"SOFTBALL","🥎"),e(a,"SPADE","♠️"),e(a,"SPAGHETTI","🍝"),e(a,"SPARKLES","✨"),e(a,"SPARKLER","🎇"),e(a,"SPARKLING_HEART","💖"),e(a,"SPOON","🥄"),e(a,"SPORTS_MEDAL","🏅"),e(a,"STACKED_BOOKS","📚"),e(a,"STAPLER","🗄️"),e(a,"STOPWATCH","⏱️"),e(a,"STORM","🌩️"),e(a,"STRAWBERRY","🍓"),e(a,"SUNFLOWER","🌻"),e(a,"SUSHI","🍣"),e(a,"SWAN","🦢"),e(a,"SWEAT_DROPLETS","💦"),e(a,"T_REX","🦖"),e(a,"TACO","🌮"),e(a,"TAKEOUT_BOX","🥡"),e(a,"TAMALE","🫔"),e(a,"TANGERINE","🍊"),e(a,"TAXI","🚕"),e(a,"TEAPOT","🫖"),e(a,"TEDDY_BEAR","🧸"),e(a,"TENNIS","🎾"),e(a,"THERMOMETER","🌡️"),e(a,"THONG_SANDAL","🩴"),e(a,"THREAD","🧵"),e(a,"TICKET","🎟️"),e(a,"TIGER","🐯"),e(a,"TOILET","🚽"),e(a,"TOMATO","🍅"),e(a,"TONGUE","👅"),e(a,"TRACTOR","🚜"),e(a,"TROLLEYBUS","🚎"),e(a,"TSHIRT","👕"),e(a,"TULIP","🌷"),e(a,"TURKEY","🦃"),e(a,"TURTLE","🐢"),e(a,"UNICORN","🦄"),e(a,"VIOLIN","🎻"),e(a,"VOLLEYBALL","🏐"),e(a,"WAFFLE","🧇"),e(a,"WASTEBASKET","🗑️"),e(a,"WATCH","⌚"),e(a,"WATER_BUFFALO","🐃"),e(a,"WATER_POLO","🤽"),e(a,"WATER_WAVE","🌊"),e(a,"WATERFALL","🧗‍♀️"),e(a,"WINDMILL","🏰"),e(a,"WINDOW","🪟"),e(a,"WINE_GLASS","🍷"),e(a,"WOOD","🪵"),e(a,"WORM","🪱"),e(a,"WREATH","🎍"),e(a,"WRITING_HAND","✍️"),e(a,"X_RAY","🦴"),e(a,"YARN","🧶"),e(a,"YO_YO","🪀"),e(a,"ZEBRA","🦓"),e(a,"ZOMBIE","🧟");async function $(){try{const S=await q(),E=await Q();return{bgImages:S,spriteImages:E,icons:a}}catch(S){throw console.error("Error loading assets:",S),S}}class j{}e(j,"loadAssets",$);var C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},J={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(S){(function(){var E=function(){this.init()};E.prototype={init:function(){var t=this||n;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator=typeof window<"u"&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var i=this||n;if(t=parseFloat(t),i.ctx||g(),typeof t<"u"&&t>=0&&t<=1){if(i._volume=t,i._muted)return i;i.usingWebAudio&&i.masterGain.gain.setValueAtTime(t,n.ctx.currentTime);for(var r=0;r<i._howls.length;r++)if(!i._howls[r]._webAudio)for(var _=i._howls[r]._getSoundIds(),l=0;l<_.length;l++){var f=i._howls[r]._soundById(_[l]);f&&f._node&&(f._node.volume=f._volume*t)}return i}return i._volume},mute:function(t){var i=this||n;i.ctx||g(),i._muted=t,i.usingWebAudio&&i.masterGain.gain.setValueAtTime(t?0:i._volume,n.ctx.currentTime);for(var r=0;r<i._howls.length;r++)if(!i._howls[r]._webAudio)for(var _=i._howls[r]._getSoundIds(),l=0;l<_.length;l++){var f=i._howls[r]._soundById(_[l]);f&&f._node&&(f._node.muted=t?!0:f._muted)}return i},stop:function(){for(var t=this||n,i=0;i<t._howls.length;i++)t._howls[i].stop();return t},unload:function(){for(var t=this||n,i=t._howls.length-1;i>=0;i--)t._howls[i].unload();return t.usingWebAudio&&t.ctx&&typeof t.ctx.close<"u"&&(t.ctx.close(),t.ctx=null,g()),t},codecs:function(t){return(this||n)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||n;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if(typeof Audio<"u")try{var i=new Audio;typeof i.oncanplaythrough>"u"&&(t._canPlayEvent="canplay")}catch{t.noAudio=!0}else t.noAudio=!0;try{var i=new Audio;i.muted&&(t.noAudio=!0)}catch{}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||n,i=null;try{i=typeof Audio<"u"?new Audio:null}catch{return t}if(!i||typeof i.canPlayType!="function")return t;var r=i.canPlayType("audio/mpeg;").replace(/^no$/,""),_=t._navigator?t._navigator.userAgent:"",l=_.match(/OPR\/(\d+)/g),f=l&&parseInt(l[0].split("/")[1],10)<33,s=_.indexOf("Safari")!==-1&&_.indexOf("Chrome")===-1,p=_.match(/Version\/(.*?) /),T=s&&p&&parseInt(p[1],10)<15;return t._codecs={mp3:!!(!f&&(r||i.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!r,opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(i.canPlayType('audio/wav; codecs="1"')||i.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!i.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!i.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(i.canPlayType("audio/x-m4b;")||i.canPlayType("audio/m4b;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(i.canPlayType("audio/x-mp4;")||i.canPlayType("audio/mp4;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!T&&i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!T&&i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!i.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(i.canPlayType("audio/x-flac;")||i.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||n;if(!(t._audioUnlocked||!t.ctx)){t._audioUnlocked=!1,t.autoUnlock=!1,!t._mobileUnloaded&&t.ctx.sampleRate!==44100&&(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var i=function(r){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var _=new Audio;_._unlocked=!0,t._releaseHtml5Audio(_)}catch{t.noAudio=!0;break}for(var l=0;l<t._howls.length;l++)if(!t._howls[l]._webAudio)for(var f=t._howls[l]._getSoundIds(),s=0;s<f.length;s++){var p=t._howls[l]._soundById(f[s]);p&&p._node&&!p._node._unlocked&&(p._node._unlocked=!0,p._node.load())}t._autoResume();var T=t.ctx.createBufferSource();T.buffer=t._scratchBuffer,T.connect(t.ctx.destination),typeof T.start>"u"?T.noteOn(0):T.start(0),typeof t.ctx.resume=="function"&&t.ctx.resume(),T.onended=function(){T.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",i,!0),document.removeEventListener("touchend",i,!0),document.removeEventListener("click",i,!0),document.removeEventListener("keydown",i,!0);for(var h=0;h<t._howls.length;h++)t._howls[h]._emit("unlock")}};return document.addEventListener("touchstart",i,!0),document.addEventListener("touchend",i,!0),document.addEventListener("click",i,!0),document.addEventListener("keydown",i,!0),t}},_obtainHtml5Audio:function(){var t=this||n;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var i=new Audio().play();return i&&typeof Promise<"u"&&(i instanceof Promise||typeof i.then=="function")&&i.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var i=this||n;return t._unlocked&&i._html5AudioPool.push(t),i},_autoSuspend:function(){var t=this;if(!(!t.autoSuspend||!t.ctx||typeof t.ctx.suspend>"u"||!n.usingWebAudio)){for(var i=0;i<t._howls.length;i++)if(t._howls[i]._webAudio){for(var r=0;r<t._howls[i]._sounds.length;r++)if(!t._howls[i]._sounds[r]._paused)return t}return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var _=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(_,_)}},3e4),t}},_autoResume:function(){var t=this;if(!(!t.ctx||typeof t.ctx.resume>"u"||!n.usingWebAudio))return t.state==="running"&&t.ctx.state!=="interrupted"&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):t.state==="suspended"||t.state==="running"&&t.ctx.state==="interrupted"?(t.ctx.resume().then(function(){t.state="running";for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):t.state==="suspending"&&(t._resumeAfterSuspend=!0),t}};var n=new E,u=function(t){var i=this;if(!t.src||t.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}i.init(t)};u.prototype={init:function(t){var i=this;return n.ctx||g(),i._autoplay=t.autoplay||!1,i._format=typeof t.format!="string"?t.format:[t.format],i._html5=t.html5||!1,i._muted=t.mute||!1,i._loop=t.loop||!1,i._pool=t.pool||5,i._preload=typeof t.preload=="boolean"||t.preload==="metadata"?t.preload:!0,i._rate=t.rate||1,i._sprite=t.sprite||{},i._src=typeof t.src!="string"?t.src:[t.src],i._volume=t.volume!==void 0?t.volume:1,i._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:t.xhr&&t.xhr.withCredentials?t.xhr.withCredentials:!1},i._duration=0,i._state="unloaded",i._sounds=[],i._endTimers={},i._queue=[],i._playLock=!1,i._onend=t.onend?[{fn:t.onend}]:[],i._onfade=t.onfade?[{fn:t.onfade}]:[],i._onload=t.onload?[{fn:t.onload}]:[],i._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],i._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],i._onpause=t.onpause?[{fn:t.onpause}]:[],i._onplay=t.onplay?[{fn:t.onplay}]:[],i._onstop=t.onstop?[{fn:t.onstop}]:[],i._onmute=t.onmute?[{fn:t.onmute}]:[],i._onvolume=t.onvolume?[{fn:t.onvolume}]:[],i._onrate=t.onrate?[{fn:t.onrate}]:[],i._onseek=t.onseek?[{fn:t.onseek}]:[],i._onunlock=t.onunlock?[{fn:t.onunlock}]:[],i._onresume=[],i._webAudio=n.usingWebAudio&&!i._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(i),i._autoplay&&i._queue.push({event:"play",action:function(){i.play()}}),i._preload&&i._preload!=="none"&&i.load(),i},load:function(){var t=this,i=null;if(n.noAudio){t._emit("loaderror",null,"No audio support.");return}typeof t._src=="string"&&(t._src=[t._src]);for(var r=0;r<t._src.length;r++){var _,l;if(t._format&&t._format[r])_=t._format[r];else{if(l=t._src[r],typeof l!="string"){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}_=/^data:audio\/([^;,]+);/i.exec(l),_||(_=/\.([^.]+)$/.exec(l.split("?",1)[0])),_&&(_=_[1].toLowerCase())}if(_||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),_&&n.codecs(_)){i=t._src[r];break}}if(!i){t._emit("loaderror",null,"No codec support for selected audio sources.");return}return t._src=i,t._state="loading",window.location.protocol==="https:"&&i.slice(0,5)==="http:"&&(t._html5=!0,t._webAudio=!1),new o(t),t._webAudio&&d(t),t},play:function(t,i){var r=this,_=null;if(typeof t=="number")_=t,t=null;else{if(typeof t=="string"&&r._state==="loaded"&&!r._sprite[t])return null;if(typeof t>"u"&&(t="__default",!r._playLock)){for(var l=0,f=0;f<r._sounds.length;f++)r._sounds[f]._paused&&!r._sounds[f]._ended&&(l++,_=r._sounds[f]._id);l===1?t=null:_=null}}var s=_?r._soundById(_):r._inactiveSound();if(!s)return null;if(_&&!t&&(t=s._sprite||"__default"),r._state!=="loaded"){s._sprite=t,s._ended=!1;var p=s._id;return r._queue.push({event:"play",action:function(){r.play(p)}}),p}if(_&&!s._paused)return i||r._loadQueue("play"),s._id;r._webAudio&&n._autoResume();var T=Math.max(0,s._seek>0?s._seek:r._sprite[t][0]/1e3),h=Math.max(0,(r._sprite[t][0]+r._sprite[t][1])/1e3-T),y=h*1e3/Math.abs(s._rate),L=r._sprite[t][0]/1e3,P=(r._sprite[t][0]+r._sprite[t][1])/1e3;s._sprite=t,s._ended=!1;var w=function(){s._paused=!1,s._seek=T,s._start=L,s._stop=P,s._loop=!!(s._loop||r._sprite[t][2])};if(T>=P){r._ended(s);return}var O=s._node;if(r._webAudio){var b=function(){r._playLock=!1,w(),r._refreshBuffer(s);var N=s._muted||r._muted?0:s._volume;O.gain.setValueAtTime(N,n.ctx.currentTime),s._playStart=n.ctx.currentTime,typeof O.bufferSource.start>"u"?s._loop?O.bufferSource.noteGrainOn(0,T,86400):O.bufferSource.noteGrainOn(0,T,h):s._loop?O.bufferSource.start(0,T,86400):O.bufferSource.start(0,T,h),y!==1/0&&(r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),y)),i||setTimeout(function(){r._emit("play",s._id),r._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?b():(r._playLock=!0,r.once("resume",b),r._clearTimer(s._id))}else{var B=function(){O.currentTime=T,O.muted=s._muted||r._muted||n._muted||O.muted,O.volume=s._volume*n.volume(),O.playbackRate=s._rate;try{var N=O.play();if(N&&typeof Promise<"u"&&(N instanceof Promise||typeof N.then=="function")?(r._playLock=!0,w(),N.then(function(){r._playLock=!1,O._unlocked=!0,i?r._loadQueue():r._emit("play",s._id)}).catch(function(){r._playLock=!1,r._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0})):i||(r._playLock=!1,w(),r._emit("play",s._id)),O.playbackRate=s._rate,O.paused){r._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}t!=="__default"||s._loop?r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),y):(r._endTimers[s._id]=function(){r._ended(s),O.removeEventListener("ended",r._endTimers[s._id],!1)},O.addEventListener("ended",r._endTimers[s._id],!1))}catch(G){r._emit("playerror",s._id,G)}};O.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(O.src=r._src,O.load());var D=window&&window.ejecta||!O.readyState&&n._navigator.isCocoonJS;if(O.readyState>=3||D)B();else{r._playLock=!0,r._state="loading";var M=function(){r._state="loaded",B(),O.removeEventListener(n._canPlayEvent,M,!1)};O.addEventListener(n._canPlayEvent,M,!1),r._clearTimer(s._id)}}return s._id},pause:function(t){var i=this;if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"pause",action:function(){i.pause(t)}}),i;for(var r=i._getSoundIds(t),_=0;_<r.length;_++){i._clearTimer(r[_]);var l=i._soundById(r[_]);if(l&&!l._paused&&(l._seek=i.seek(r[_]),l._rateSeek=0,l._paused=!0,i._stopFade(r[_]),l._node))if(i._webAudio){if(!l._node.bufferSource)continue;typeof l._node.bufferSource.stop>"u"?l._node.bufferSource.noteOff(0):l._node.bufferSource.stop(0),i._cleanBuffer(l._node)}else(!isNaN(l._node.duration)||l._node.duration===1/0)&&l._node.pause();arguments[1]||i._emit("pause",l?l._id:null)}return i},stop:function(t,i){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(t)}}),r;for(var _=r._getSoundIds(t),l=0;l<_.length;l++){r._clearTimer(_[l]);var f=r._soundById(_[l]);f&&(f._seek=f._start||0,f._rateSeek=0,f._paused=!0,f._ended=!0,r._stopFade(_[l]),f._node&&(r._webAudio?f._node.bufferSource&&(typeof f._node.bufferSource.stop>"u"?f._node.bufferSource.noteOff(0):f._node.bufferSource.stop(0),r._cleanBuffer(f._node)):(!isNaN(f._node.duration)||f._node.duration===1/0)&&(f._node.currentTime=f._start||0,f._node.pause(),f._node.duration===1/0&&r._clearSound(f._node))),i||r._emit("stop",f._id))}return r},mute:function(t,i){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(t,i)}}),r;if(typeof i>"u")if(typeof t=="boolean")r._muted=t;else return r._muted;for(var _=r._getSoundIds(i),l=0;l<_.length;l++){var f=r._soundById(_[l]);f&&(f._muted=t,f._interval&&r._stopFade(f._id),r._webAudio&&f._node?f._node.gain.setValueAtTime(t?0:f._volume,n.ctx.currentTime):f._node&&(f._node.muted=n._muted?!0:t),r._emit("mute",f._id))}return r},volume:function(){var t=this,i=arguments,r,_;if(i.length===0)return t._volume;if(i.length===1||i.length===2&&typeof i[1]>"u"){var l=t._getSoundIds(),f=l.indexOf(i[0]);f>=0?_=parseInt(i[0],10):r=parseFloat(i[0])}else i.length>=2&&(r=parseFloat(i[0]),_=parseInt(i[1],10));var s;if(typeof r<"u"&&r>=0&&r<=1){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"volume",action:function(){t.volume.apply(t,i)}}),t;typeof _>"u"&&(t._volume=r),_=t._getSoundIds(_);for(var p=0;p<_.length;p++)s=t._soundById(_[p]),s&&(s._volume=r,i[2]||t._stopFade(_[p]),t._webAudio&&s._node&&!s._muted?s._node.gain.setValueAtTime(r,n.ctx.currentTime):s._node&&!s._muted&&(s._node.volume=r*n.volume()),t._emit("volume",s._id))}else return s=_?t._soundById(_):t._sounds[0],s?s._volume:0;return t},fade:function(t,i,r,_){var l=this;if(l._state!=="loaded"||l._playLock)return l._queue.push({event:"fade",action:function(){l.fade(t,i,r,_)}}),l;t=Math.min(Math.max(0,parseFloat(t)),1),i=Math.min(Math.max(0,parseFloat(i)),1),r=parseFloat(r),l.volume(t,_);for(var f=l._getSoundIds(_),s=0;s<f.length;s++){var p=l._soundById(f[s]);if(p){if(_||l._stopFade(f[s]),l._webAudio&&!p._muted){var T=n.ctx.currentTime,h=T+r/1e3;p._volume=t,p._node.gain.setValueAtTime(t,T),p._node.gain.linearRampToValueAtTime(i,h)}l._startFadeInterval(p,t,i,r,f[s],typeof _>"u")}}return l},_startFadeInterval:function(t,i,r,_,l,f){var s=this,p=i,T=r-i,h=Math.abs(T/.01),y=Math.max(4,h>0?_/h:_),L=Date.now();t._fadeTo=r,t._interval=setInterval(function(){var P=(Date.now()-L)/_;L=Date.now(),p+=T*P,p=Math.round(p*100)/100,T<0?p=Math.max(r,p):p=Math.min(r,p),s._webAudio?t._volume=p:s.volume(p,t._id,!0),f&&(s._volume=p),(r<i&&p<=r||r>i&&p>=r)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,s.volume(r,t._id),s._emit("fade",t._id))},y)},_stopFade:function(t){var i=this,r=i._soundById(t);return r&&r._interval&&(i._webAudio&&r._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(r._interval),r._interval=null,i.volume(r._fadeTo,t),r._fadeTo=null,i._emit("fade",t)),i},loop:function(){var t=this,i=arguments,r,_,l;if(i.length===0)return t._loop;if(i.length===1)if(typeof i[0]=="boolean")r=i[0],t._loop=r;else return l=t._soundById(parseInt(i[0],10)),l?l._loop:!1;else i.length===2&&(r=i[0],_=parseInt(i[1],10));for(var f=t._getSoundIds(_),s=0;s<f.length;s++)l=t._soundById(f[s]),l&&(l._loop=r,t._webAudio&&l._node&&l._node.bufferSource&&(l._node.bufferSource.loop=r,r&&(l._node.bufferSource.loopStart=l._start||0,l._node.bufferSource.loopEnd=l._stop,t.playing(f[s])&&(t.pause(f[s],!0),t.play(f[s],!0)))));return t},rate:function(){var t=this,i=arguments,r,_;if(i.length===0)_=t._sounds[0]._id;else if(i.length===1){var l=t._getSoundIds(),f=l.indexOf(i[0]);f>=0?_=parseInt(i[0],10):r=parseFloat(i[0])}else i.length===2&&(r=parseFloat(i[0]),_=parseInt(i[1],10));var s;if(typeof r=="number"){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"rate",action:function(){t.rate.apply(t,i)}}),t;typeof _>"u"&&(t._rate=r),_=t._getSoundIds(_);for(var p=0;p<_.length;p++)if(s=t._soundById(_[p]),s){t.playing(_[p])&&(s._rateSeek=t.seek(_[p]),s._playStart=t._webAudio?n.ctx.currentTime:s._playStart),s._rate=r,t._webAudio&&s._node&&s._node.bufferSource?s._node.bufferSource.playbackRate.setValueAtTime(r,n.ctx.currentTime):s._node&&(s._node.playbackRate=r);var T=t.seek(_[p]),h=(t._sprite[s._sprite][0]+t._sprite[s._sprite][1])/1e3-T,y=h*1e3/Math.abs(s._rate);(t._endTimers[_[p]]||!s._paused)&&(t._clearTimer(_[p]),t._endTimers[_[p]]=setTimeout(t._ended.bind(t,s),y)),t._emit("rate",s._id)}}else return s=t._soundById(_),s?s._rate:t._rate;return t},seek:function(){var t=this,i=arguments,r,_;if(i.length===0)t._sounds.length&&(_=t._sounds[0]._id);else if(i.length===1){var l=t._getSoundIds(),f=l.indexOf(i[0]);f>=0?_=parseInt(i[0],10):t._sounds.length&&(_=t._sounds[0]._id,r=parseFloat(i[0]))}else i.length===2&&(r=parseFloat(i[0]),_=parseInt(i[1],10));if(typeof _>"u")return 0;if(typeof r=="number"&&(t._state!=="loaded"||t._playLock))return t._queue.push({event:"seek",action:function(){t.seek.apply(t,i)}}),t;var s=t._soundById(_);if(s)if(typeof r=="number"&&r>=0){var p=t.playing(_);p&&t.pause(_,!0),s._seek=r,s._ended=!1,t._clearTimer(_),!t._webAudio&&s._node&&!isNaN(s._node.duration)&&(s._node.currentTime=r);var T=function(){p&&t.play(_,!0),t._emit("seek",_)};if(p&&!t._webAudio){var h=function(){t._playLock?setTimeout(h,0):T()};setTimeout(h,0)}else T()}else if(t._webAudio){var y=t.playing(_)?n.ctx.currentTime-s._playStart:0,L=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(L+y*Math.abs(s._rate))}else return s._node.currentTime;return t},playing:function(t){var i=this;if(typeof t=="number"){var r=i._soundById(t);return r?!r._paused:!1}for(var _=0;_<i._sounds.length;_++)if(!i._sounds[_]._paused)return!0;return!1},duration:function(t){var i=this,r=i._duration,_=i._soundById(t);return _&&(r=i._sprite[_._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var t=this,i=t._sounds,r=0;r<i.length;r++)i[r]._paused||t.stop(i[r]._id),t._webAudio||(t._clearSound(i[r]._node),i[r]._node.removeEventListener("error",i[r]._errorFn,!1),i[r]._node.removeEventListener(n._canPlayEvent,i[r]._loadFn,!1),i[r]._node.removeEventListener("ended",i[r]._endFn,!1),n._releaseHtml5Audio(i[r]._node)),delete i[r]._node,t._clearTimer(i[r]._id);var _=n._howls.indexOf(t);_>=0&&n._howls.splice(_,1);var l=!0;for(r=0;r<n._howls.length;r++)if(n._howls[r]._src===t._src||t._src.indexOf(n._howls[r]._src)>=0){l=!1;break}return A&&l&&delete A[t._src],n.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,i,r,_){var l=this,f=l["_on"+t];return typeof i=="function"&&f.push(_?{id:r,fn:i,once:_}:{id:r,fn:i}),l},off:function(t,i,r){var _=this,l=_["_on"+t],f=0;if(typeof i=="number"&&(r=i,i=null),i||r)for(f=0;f<l.length;f++){var s=r===l[f].id;if(i===l[f].fn&&s||!i&&s){l.splice(f,1);break}}else if(t)_["_on"+t]=[];else{var p=Object.keys(_);for(f=0;f<p.length;f++)p[f].indexOf("_on")===0&&Array.isArray(_[p[f]])&&(_[p[f]]=[])}return _},once:function(t,i,r){var _=this;return _.on(t,i,r,1),_},_emit:function(t,i,r){for(var _=this,l=_["_on"+t],f=l.length-1;f>=0;f--)(!l[f].id||l[f].id===i||t==="load")&&(setTimeout((function(s){s.call(this,i,r)}).bind(_,l[f].fn),0),l[f].once&&_.off(t,l[f].fn,l[f].id));return _._loadQueue(t),_},_loadQueue:function(t){var i=this;if(i._queue.length>0){var r=i._queue[0];r.event===t&&(i._queue.shift(),i._loadQueue()),t||r.action()}return i},_ended:function(t){var i=this,r=t._sprite;if(!i._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(i._ended.bind(i,t),100),i;var _=!!(t._loop||i._sprite[r][2]);if(i._emit("end",t._id),!i._webAudio&&_&&i.stop(t._id,!0).play(t._id),i._webAudio&&_){i._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=n.ctx.currentTime;var l=(t._stop-t._start)*1e3/Math.abs(t._rate);i._endTimers[t._id]=setTimeout(i._ended.bind(i,t),l)}return i._webAudio&&!_&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,i._clearTimer(t._id),i._cleanBuffer(t._node),n._autoSuspend()),!i._webAudio&&!_&&i.stop(t._id,!0),i},_clearTimer:function(t){var i=this;if(i._endTimers[t]){if(typeof i._endTimers[t]!="function")clearTimeout(i._endTimers[t]);else{var r=i._soundById(t);r&&r._node&&r._node.removeEventListener("ended",i._endTimers[t],!1)}delete i._endTimers[t]}return i},_soundById:function(t){for(var i=this,r=0;r<i._sounds.length;r++)if(t===i._sounds[r]._id)return i._sounds[r];return null},_inactiveSound:function(){var t=this;t._drain();for(var i=0;i<t._sounds.length;i++)if(t._sounds[i]._ended)return t._sounds[i].reset();return new o(t)},_drain:function(){var t=this,i=t._pool,r=0,_=0;if(!(t._sounds.length<i)){for(_=0;_<t._sounds.length;_++)t._sounds[_]._ended&&r++;for(_=t._sounds.length-1;_>=0;_--){if(r<=i)return;t._sounds[_]._ended&&(t._webAudio&&t._sounds[_]._node&&t._sounds[_]._node.disconnect(0),t._sounds.splice(_,1),r--)}}},_getSoundIds:function(t){var i=this;if(typeof t>"u"){for(var r=[],_=0;_<i._sounds.length;_++)r.push(i._sounds[_]._id);return r}else return[t]},_refreshBuffer:function(t){var i=this;return t._node.bufferSource=n.ctx.createBufferSource(),t._node.bufferSource.buffer=A[i._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,n.ctx.currentTime),i},_cleanBuffer:function(t){var i=this,r=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(!t.bufferSource)return i;if(n._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),r))try{t.bufferSource.buffer=n._scratchBuffer}catch{}return t.bufferSource=null,i},_clearSound:function(t){var i=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);i||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(t){this._parent=t,this.init()};o.prototype={init:function(){var t=this,i=t._parent;return t._muted=i._muted,t._loop=i._loop,t._volume=i._volume,t._rate=i._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++n._counter,i._sounds.push(t),t.create(),t},create:function(){var t=this,i=t._parent,r=n._muted||t._muted||t._parent._muted?0:t._volume;return i._webAudio?(t._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),t._node.gain.setValueAtTime(r,n.ctx.currentTime),t._node.paused=!0,t._node.connect(n.masterGain)):n.noAudio||(t._node=n._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(n._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=i._src,t._node.preload=i._preload===!0?"auto":i._preload,t._node.volume=r*n.volume(),t._node.load()),t},reset:function(){var t=this,i=t._parent;return t._muted=i._muted,t._loop=i._loop,t._volume=i._volume,t._rate=i._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++n._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,i=t._parent;i._duration=Math.ceil(t._node.duration*10)/10,Object.keys(i._sprite).length===0&&(i._sprite={__default:[0,i._duration*1e3]}),i._state!=="loaded"&&(i._state="loaded",i._emit("load"),i._loadQueue()),t._node.removeEventListener(n._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,i=t._parent;i._duration===1/0&&(i._duration=Math.ceil(t._node.duration*10)/10,i._sprite.__default[1]===1/0&&(i._sprite.__default[1]=i._duration*1e3),i._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var A={},d=function(t){var i=t._src;if(A[i]){t._duration=A[i].duration,c(t);return}if(/^data:[^;]+;base64,/.test(i)){for(var r=atob(i.split(",")[1]),_=new Uint8Array(r.length),l=0;l<r.length;++l)_[l]=r.charCodeAt(l);m(_.buffer,t)}else{var f=new XMLHttpRequest;f.open(t._xhr.method,i,!0),f.withCredentials=t._xhr.withCredentials,f.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach(function(s){f.setRequestHeader(s,t._xhr.headers[s])}),f.onload=function(){var s=(f.status+"")[0];if(s!=="0"&&s!=="2"&&s!=="3"){t._emit("loaderror",null,"Failed loading audio file with status: "+f.status+".");return}m(f.response,t)},f.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete A[i],t.load())},v(f)}},v=function(t){try{t.send()}catch{t.onerror()}},m=function(t,i){var r=function(){i._emit("loaderror",null,"Decoding audio data failed.")},_=function(l){l&&i._sounds.length>0?(A[i._src]=l,c(i,l)):r()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(t).then(_).catch(r):n.ctx.decodeAudioData(t,_,r)},c=function(t,i){i&&!t._duration&&(t._duration=i.duration),Object.keys(t._sprite).length===0&&(t._sprite={__default:[0,t._duration*1e3]}),t._state!=="loaded"&&(t._state="loaded",t._emit("load"),t._loadQueue())},g=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),i=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=i?parseInt(i[1],10):null;if(t&&r&&r<9){var _=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!_&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};S.Howler=n,S.Howl=u,typeof C<"u"?(C.HowlerGlobal=E,C.Howler=n,C.Howl=u,C.Sound=o):typeof window<"u"&&(window.HowlerGlobal=E,window.Howler=n,window.Howl=u,window.Sound=o)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var u=this;if(!u.ctx||!u.ctx.listener)return u;for(var o=u._howls.length-1;o>=0;o--)u._howls[o].stereo(n);return u},HowlerGlobal.prototype.pos=function(n,u,o){var A=this;if(!A.ctx||!A.ctx.listener)return A;if(u=typeof u!="number"?A._pos[1]:u,o=typeof o!="number"?A._pos[2]:o,typeof n=="number")A._pos=[n,u,o],typeof A.ctx.listener.positionX<"u"?(A.ctx.listener.positionX.setTargetAtTime(A._pos[0],Howler.ctx.currentTime,.1),A.ctx.listener.positionY.setTargetAtTime(A._pos[1],Howler.ctx.currentTime,.1),A.ctx.listener.positionZ.setTargetAtTime(A._pos[2],Howler.ctx.currentTime,.1)):A.ctx.listener.setPosition(A._pos[0],A._pos[1],A._pos[2]);else return A._pos;return A},HowlerGlobal.prototype.orientation=function(n,u,o,A,d,v){var m=this;if(!m.ctx||!m.ctx.listener)return m;var c=m._orientation;if(u=typeof u!="number"?c[1]:u,o=typeof o!="number"?c[2]:o,A=typeof A!="number"?c[3]:A,d=typeof d!="number"?c[4]:d,v=typeof v!="number"?c[5]:v,typeof n=="number")m._orientation=[n,u,o,A,d,v],typeof m.ctx.listener.forwardX<"u"?(m.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),m.ctx.listener.forwardY.setTargetAtTime(u,Howler.ctx.currentTime,.1),m.ctx.listener.forwardZ.setTargetAtTime(o,Howler.ctx.currentTime,.1),m.ctx.listener.upX.setTargetAtTime(A,Howler.ctx.currentTime,.1),m.ctx.listener.upY.setTargetAtTime(d,Howler.ctx.currentTime,.1),m.ctx.listener.upZ.setTargetAtTime(v,Howler.ctx.currentTime,.1)):m.ctx.listener.setOrientation(n,u,o,A,d,v);else return c;return m},Howl.prototype.init=function(n){return function(u){var o=this;return o._orientation=u.orientation||[1,0,0],o._stereo=u.stereo||null,o._pos=u.pos||null,o._pannerAttr={coneInnerAngle:typeof u.coneInnerAngle<"u"?u.coneInnerAngle:360,coneOuterAngle:typeof u.coneOuterAngle<"u"?u.coneOuterAngle:360,coneOuterGain:typeof u.coneOuterGain<"u"?u.coneOuterGain:0,distanceModel:typeof u.distanceModel<"u"?u.distanceModel:"inverse",maxDistance:typeof u.maxDistance<"u"?u.maxDistance:1e4,panningModel:typeof u.panningModel<"u"?u.panningModel:"HRTF",refDistance:typeof u.refDistance<"u"?u.refDistance:1,rolloffFactor:typeof u.rolloffFactor<"u"?u.rolloffFactor:1},o._onstereo=u.onstereo?[{fn:u.onstereo}]:[],o._onpos=u.onpos?[{fn:u.onpos}]:[],o._onorientation=u.onorientation?[{fn:u.onorientation}]:[],n.call(this,u)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,u){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"stereo",action:function(){o.stereo(n,u)}}),o;var A=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof u>"u")if(typeof n=="number")o._stereo=n,o._pos=[n,0,0];else return o._stereo;for(var d=o._getSoundIds(u),v=0;v<d.length;v++){var m=o._soundById(d[v]);if(m)if(typeof n=="number")m._stereo=n,m._pos=[n,0,0],m._node&&(m._pannerAttr.panningModel="equalpower",(!m._panner||!m._panner.pan)&&E(m,A),A==="spatial"?typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):m._panner.setPosition(n,0,0):m._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),o._emit("stereo",m._id);else return m._stereo}return o},Howl.prototype.pos=function(n,u,o,A){var d=this;if(!d._webAudio)return d;if(d._state!=="loaded")return d._queue.push({event:"pos",action:function(){d.pos(n,u,o,A)}}),d;if(u=typeof u!="number"?0:u,o=typeof o!="number"?-.5:o,typeof A>"u")if(typeof n=="number")d._pos=[n,u,o];else return d._pos;for(var v=d._getSoundIds(A),m=0;m<v.length;m++){var c=d._soundById(v[m]);if(c)if(typeof n=="number")c._pos=[n,u,o],c._node&&((!c._panner||c._panner.pan)&&E(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(u,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):c._panner.setPosition(n,u,o)),d._emit("pos",c._id);else return c._pos}return d},Howl.prototype.orientation=function(n,u,o,A){var d=this;if(!d._webAudio)return d;if(d._state!=="loaded")return d._queue.push({event:"orientation",action:function(){d.orientation(n,u,o,A)}}),d;if(u=typeof u!="number"?d._orientation[1]:u,o=typeof o!="number"?d._orientation[2]:o,typeof A>"u")if(typeof n=="number")d._orientation=[n,u,o];else return d._orientation;for(var v=d._getSoundIds(A),m=0;m<v.length;m++){var c=d._soundById(v[m]);if(c)if(typeof n=="number")c._orientation=[n,u,o],c._node&&(c._panner||(c._pos||(c._pos=d._pos||[0,0,-.5]),E(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(u,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):c._panner.setOrientation(n,u,o)),d._emit("orientation",c._id);else return c._orientation}return d},Howl.prototype.pannerAttr=function(){var n=this,u=arguments,o,A,d;if(!n._webAudio)return n;if(u.length===0)return n._pannerAttr;if(u.length===1)if(typeof u[0]=="object")o=u[0],typeof A>"u"&&(o.pannerAttr||(o.pannerAttr={coneInnerAngle:o.coneInnerAngle,coneOuterAngle:o.coneOuterAngle,coneOuterGain:o.coneOuterGain,distanceModel:o.distanceModel,maxDistance:o.maxDistance,refDistance:o.refDistance,rolloffFactor:o.rolloffFactor,panningModel:o.panningModel}),n._pannerAttr={coneInnerAngle:typeof o.pannerAttr.coneInnerAngle<"u"?o.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof o.pannerAttr.coneOuterAngle<"u"?o.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof o.pannerAttr.coneOuterGain<"u"?o.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof o.pannerAttr.distanceModel<"u"?o.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof o.pannerAttr.maxDistance<"u"?o.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof o.pannerAttr.refDistance<"u"?o.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof o.pannerAttr.rolloffFactor<"u"?o.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof o.pannerAttr.panningModel<"u"?o.pannerAttr.panningModel:n._panningModel});else return d=n._soundById(parseInt(u[0],10)),d?d._pannerAttr:n._pannerAttr;else u.length===2&&(o=u[0],A=parseInt(u[1],10));for(var v=n._getSoundIds(A),m=0;m<v.length;m++)if(d=n._soundById(v[m]),d){var c=d._pannerAttr;c={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:c.coneOuterGain,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:c.distanceModel,maxDistance:typeof o.maxDistance<"u"?o.maxDistance:c.maxDistance,refDistance:typeof o.refDistance<"u"?o.refDistance:c.refDistance,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:c.rolloffFactor,panningModel:typeof o.panningModel<"u"?o.panningModel:c.panningModel};var g=d._panner;g||(d._pos||(d._pos=n._pos||[0,0,-.5]),E(d,"spatial"),g=d._panner),g.coneInnerAngle=c.coneInnerAngle,g.coneOuterAngle=c.coneOuterAngle,g.coneOuterGain=c.coneOuterGain,g.distanceModel=c.distanceModel,g.maxDistance=c.maxDistance,g.refDistance=c.refDistance,g.rolloffFactor=c.rolloffFactor,g.panningModel=c.panningModel}return n},Sound.prototype.init=function(n){return function(){var u=this,o=u._parent;u._orientation=o._orientation,u._stereo=o._stereo,u._pos=o._pos,u._pannerAttr=o._pannerAttr,n.call(this),u._stereo?o.stereo(u._stereo):u._pos&&o.pos(u._pos[0],u._pos[1],u._pos[2],u._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var u=this,o=u._parent;return u._orientation=o._orientation,u._stereo=o._stereo,u._pos=o._pos,u._pannerAttr=o._pannerAttr,u._stereo?o.stereo(u._stereo):u._pos?o.pos(u._pos[0],u._pos[1],u._pos[2],u._id):u._panner&&(u._panner.disconnect(0),u._panner=void 0,o._refreshBuffer(u)),n.call(this)}}(Sound.prototype.reset);var E=function(n,u){u=u||"spatial",u==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(J);class R{constructor(){if(R.instance)return R.instance;R.instance=this,this.slideTypes=new Map}static getInstance(){return R.instance||(R.instance=new R),R.instance}registerSlideType(E){this.slideTypes.set(E.type,E)}getPlayerComponent(E){var n;return(n=this.slideTypes.get(E))==null?void 0:n.PlayerComponent}getEditorComponent(E){var n;return(n=this.slideTypes.get(E))==null?void 0:n.EditorComponent}}const H=R.getInstance();function tt(){const S={type:"canvas",PlayerComponent:Y,EditorComponent:V},E={type:"Eqs",PlayerComponent:X,EditorComponent:Z};H.registerSlideType(S),H.registerSlideType(E)}export{j as P,R as S,J as h,tt as r};
