import{s as te,h as W,i as V,f as _,e as T,t as H,j as K,b as P,l as j,r as O,k as L,d as fe,m as d,E as g,v as p,w as F,x as le,H as ge,z as ye,o as ve,F as ce,I as Pe,J as Se}from"./scheduler.D1-pshVP.js";import{S as se,i as re,t as y,g as J,a as I,c as X,h as ke,j as Te,b as Y,d as ae,m as Z,e as x}from"./index.D6LZvLP-.js";import"./entry.D5vBljQm.js";import{f as me,s as de}from"./index.BFmSdN39.js";import{T as A}from"./PlayerNoSound.svelte_svelte_type_style_lang.BeHBNSgs.js";function _e(a){let l,e,r,i,n,t,s="||",u,f,v="■",C,b,U,o,M,D=a[0].slides[a[0].slides.length-1].endTime+"",S,m,$,B,w,z,G,R,k,ee,ne;function ie(c,h){return typeof c[1]=="number"?De:we}let Q=ie(a),N=Q(a);return{c(){l=T("div"),e=T("div"),r=T("button"),i=H("▶"),n=K(),t=T("button"),t.textContent=s,u=K(),f=T("button"),f.textContent=v,C=K(),b=T("input"),U=K(),o=T("div"),N.c(),M=H(`
        / `),S=H(D),m=H(" sec"),$=K(),B=T("div"),w=T("input"),this.h()},l(c){l=P(c,"DIV",{class:!0,style:!0});var h=j(l);e=P(h,"DIV",{class:!0,style:!0});var E=j(e);r=P(E,"BUTTON",{class:!0,style:!0});var ue=j(r);i=O(ue,"▶"),ue.forEach(_),n=L(E),t=P(E,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),fe(t)!=="svelte-1iauj0x"&&(t.textContent=s),u=L(E),f=P(E,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),fe(f)!=="svelte-f4x0p8"&&(f.textContent=v),C=L(E),b=P(E,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),U=L(E),o=P(E,"DIV",{class:!0,style:!0});var q=j(o);N.l(q),M=O(q,`
        / `),S=O(q,D),m=O(q," sec"),q.forEach(_),$=L(E),B=P(E,"DIV",{class:!0,style:!0});var oe=j(B);w=P(oe,"INPUT",{type:!0,min:!0,max:!0,class:!0,style:!0}),oe.forEach(_),E.forEach(_),h.forEach(_),this.h()},h(){d(r,"class","toolbar-button ml-2 svelte-5ua86e"),g(r,"background-color",a[4].primary),d(t,"class","toolbar-button svelte-5ua86e"),g(t,"background-color","gray"),d(f,"class","toolbar-button svelte-5ua86e"),g(f,"background-color","#b91c1c"),d(b,"type","range"),d(b,"min","0"),d(b,"max","1"),d(b,"step","0.1"),b.value="0.8",d(b,"class","volume-slider svelte-5ua86e"),d(o,"class","toolbar-text svelte-5ua86e"),g(o,"background-color",a[4].bg),g(o,"color",a[4].text),d(w,"type","range"),d(w,"min","0"),d(w,"max",z=a[0].slides[a[0].slides.length-1].endTime),w.value=a[1],d(w,"class","progress-slider svelte-5ua86e"),g(w,"background-color",a[4].secondary),d(B,"class","progress-slider-container svelte-5ua86e"),g(B,"background-color",a[4].bg),d(e,"class","toolbar-content flex items-center space-x-2 svelte-5ua86e"),g(e,"background-color",a[4].secondary),d(l,"class","toolbar-wrapper svelte-5ua86e"),g(l,"--opacity",a[3])},m(c,h){V(c,l,h),p(l,e),p(e,r),p(r,i),p(e,n),p(e,t),p(e,u),p(e,f),p(e,C),p(e,b),p(e,U),p(e,o),N.m(o,null),p(o,M),p(o,S),p(o,m),p(e,$),p(e,B),p(B,w),k=!0,ee||(ne=[F(r,"click",a[5]),F(t,"click",a[7]),F(f,"click",a[6]),F(b,"input",a[13]),F(w,"change",a[14])],ee=!0)},p(c,h){(!k||h&16)&&g(r,"background-color",c[4].primary),Q===(Q=ie(c))&&N?N.p(c,h):(N.d(1),N=Q(c),N&&(N.c(),N.m(o,M))),(!k||h&1)&&D!==(D=c[0].slides[c[0].slides.length-1].endTime+"")&&le(S,D),(!k||h&16)&&g(o,"background-color",c[4].bg),(!k||h&16)&&g(o,"color",c[4].text),(!k||h&1&&z!==(z=c[0].slides[c[0].slides.length-1].endTime))&&d(w,"max",z),(!k||h&2)&&(w.value=c[1]),(!k||h&16)&&g(w,"background-color",c[4].secondary),(!k||h&16)&&g(B,"background-color",c[4].bg),(!k||h&16)&&g(e,"background-color",c[4].secondary),(!k||h&8)&&g(l,"--opacity",c[3])},i(c){k||(c&&ge(()=>{k&&(R&&R.end(1),G=ke(l,me,{delay:300}),G.start())}),k=!0)},o(c){G&&G.invalidate(),c&&(R=Te(l,me,{delay:300})),k=!1},d(c){c&&_(l),N.d(),c&&R&&R.end(),ee=!1,ye(ne)}}}function we(a){let l;return{c(){l=H(a[1])},l(e){l=O(e,a[1])},m(e,r){V(e,l,r)},p(e,r){r&2&&le(l,e[1])},d(e){e&&_(l)}}}function De(a){let l=a[1].toFixed(0)+"",e;return{c(){e=H(l)},l(r){e=O(r,l)},m(r,i){V(r,e,i)},p(r,i){i&2&&l!==(l=r[1].toFixed(0)+"")&&le(e,l)},d(r){r&&_(e)}}}function Ee(a){let l,e=a[0]&&_e(a);return{c(){e&&e.c(),l=W()},l(r){e&&e.l(r),l=W()},m(r,i){e&&e.m(r,i),V(r,l,i)},p(r,[i]){r[0]?e?(e.p(r,i),i&1&&y(e,1)):(e=_e(r),e.c(),y(e,1),e.m(l.parentNode,l)):e&&(J(),I(e,1,1,()=>{e=null}),X())},i(r){y(e)},o(r){I(e)},d(r){r&&_(l),e&&e.d(r)}}}function Ie(a,l,e){let r,{player:i}=l,{pulse:n}=l,{preStart:t=()=>{}}=l,{preStop:s=()=>{}}=l,{prePause:u=()=>{}}=l,{setPulse:f=()=>{}}=l,{theme:v="light"}=l,{opacity:C=.8}=l;function b(){t(),i.start()}function U(){s(),i.stop()}function o(){u(),i.pause()}function M(m){i.setVolume(m)}const D=m=>M(m.target.value),S=m=>f(m.target.value);return a.$$set=m=>{"player"in m&&e(0,i=m.player),"pulse"in m&&e(1,n=m.pulse),"preStart"in m&&e(9,t=m.preStart),"preStop"in m&&e(10,s=m.preStop),"prePause"in m&&e(11,u=m.prePause),"setPulse"in m&&e(2,f=m.setPulse),"theme"in m&&e(12,v=m.theme),"opacity"in m&&e(3,C=m.opacity)},a.$$.update=()=>{a.$$.dirty&4096&&e(4,r=v==="dark"?{bg:"#333",text:"#fff",primary:"#00A6ED",secondary:"#aeb18c"}:{bg:"#fff",text:"#333",primary:"#065d7f",secondary:"#aeb18c"})},[i,n,f,C,r,b,U,o,M,t,s,u,v,D,S]}class Ce extends se{constructor(l){super(),re(this,l,Ie,Ee,te,{player:0,pulse:1,preStart:9,preStop:10,prePause:11,setPulse:2,theme:12,opacity:3})}}function pe(a){let l,e,r;var i=a[6].getPlayerComponent(a[4].type.toLowerCase());function n(t,s){return{props:{currentTime:t[0],pulse:t[2],items:t[4].items,startTime:t[4].startTime,endTime:t[4].endTime,slideExtra:t[4].slideExtra,assets:t[1],setPulse:t[3]}}}return i&&(l=ce(i,n(a))),{c(){l&&Y(l.$$.fragment),e=W()},l(t){l&&ae(l.$$.fragment,t),e=W()},m(t,s){l&&Z(l,t,s),V(t,e,s),r=!0},p(t,s){if(s&16&&i!==(i=t[6].getPlayerComponent(t[4].type.toLowerCase()))){if(l){J();const u=l;I(u.$$.fragment,1,0,()=>{x(u,1)}),X()}i?(l=ce(i,n(t)),Y(l.$$.fragment),y(l.$$.fragment,1),Z(l,e.parentNode,e)):l=null}else if(i){const u={};s&1&&(u.currentTime=t[0]),s&4&&(u.pulse=t[2]),s&16&&(u.items=t[4].items),s&16&&(u.startTime=t[4].startTime),s&16&&(u.endTime=t[4].endTime),s&16&&(u.slideExtra=t[4].slideExtra),s&2&&(u.assets=t[1]),s&8&&(u.setPulse=t[3]),l.$set(u)}},i(t){r||(l&&y(l.$$.fragment,t),r=!0)},o(t){l&&I(l.$$.fragment,t),r=!1},d(t){t&&_(e),l&&x(l,t)}}}function Ne(a){let l,e,r,i,n=a[4]&&a[5]&&pe(a);return{c(){l=T("div"),n&&n.c(),this.h()},l(t){l=P(t,"DIV",{tabindex:!0});var s=j(l);n&&n.l(s),s.forEach(_),this.h()},h(){d(l,"tabindex","0")},m(t,s){V(t,l,s),n&&n.m(l,null),e=!0,r||(i=[F(l,"keyup",a[7]),F(l,"click",a[8])],r=!0)},p(t,[s]){t[4]&&t[5]?n?(n.p(t,s),s&48&&y(n,1)):(n=pe(t),n.c(),y(n,1),n.m(l,null)):n&&(J(),I(n,1,1,()=>{n=null}),X())},i(t){e||(y(n),e=!0)},o(t){I(n),e=!1},d(t){t&&_(l),n&&n.d(),r=!1,ye(i)}}}function Ve(a,l,e){const r=A.SlideRegistry.getInstance();let{player:i}=l,{currentTime:n}=l,{assets:t}=l,{pulse:s}=l,{pause:u=()=>{}}=l,{setPulse:f=()=>{}}=l,v,C=!1;ve(async()=>{e(5,C=!0)});function b(o){o.code==="Space"&&u()}function U(){u()}return a.$$set=o=>{"player"in o&&e(9,i=o.player),"currentTime"in o&&e(0,n=o.currentTime),"assets"in o&&e(1,t=o.assets),"pulse"in o&&e(2,s=o.pulse),"pause"in o&&e(10,u=o.pause),"setPulse"in o&&e(3,f=o.setPulse)},a.$$.update=()=>{a.$$.dirty&512&&i&&e(4,v=i.getCurrentSlide()),a.$$.dirty&516&&s&&i&&e(4,v=i.getCurrentSlide())},[n,t,s,f,v,C,r,b,U,i,u]}class Ue extends se{constructor(l){super(),re(this,l,Ve,Ne,te,{player:9,currentTime:0,assets:1,pulse:2,pause:10,setPulse:3})}}function he(a){let l,e,r,i,n=a[3]&&be(a);return r=new Ue({props:{player:a[1],pulse:a[2],currentTime:a[2],pause:a[7],assets:a[0],setPulse:a[8]}}),{c(){n&&n.c(),l=K(),e=T("div"),Y(r.$$.fragment),this.h()},l(t){n&&n.l(t),l=L(t),e=P(t,"DIV",{class:!0});var s=j(e);ae(r.$$.fragment,s),s.forEach(_),this.h()},h(){d(e,"class","h-full")},m(t,s){n&&n.m(t,s),V(t,l,s),V(t,e,s),Z(r,e,null),i=!0},p(t,s){t[3]?n?(n.p(t,s),s&8&&y(n,1)):(n=be(t),n.c(),y(n,1),n.m(l.parentNode,l)):n&&(J(),I(n,1,1,()=>{n=null}),X());const u={};s&2&&(u.player=t[1]),s&4&&(u.pulse=t[2]),s&4&&(u.currentTime=t[2]),s&1&&(u.assets=t[0]),r.$set(u)},i(t){i||(y(n),y(r.$$.fragment,t),i=!0)},o(t){I(n),I(r.$$.fragment,t),i=!1},d(t){t&&(_(l),_(e)),n&&n.d(t),x(r)}}}function be(a){let l,e,r,i,n;return e=new Ce({props:{player:a[1],pulse:a[2],preStart:a[5],preStop:a[6],setPulse:a[8],prePause:a[7],opacity:.7,theme:"dark"}}),{c(){l=T("div"),Y(e.$$.fragment),this.h()},l(t){l=P(t,"DIV",{class:!0});var s=j(l);ae(e.$$.fragment,s),s.forEach(_),this.h()},h(){d(l,"class","toolbar svelte-1hlky7j")},m(t,s){V(t,l,s),Z(e,l,null),n=!0},p(t,s){const u={};s&2&&(u.player=t[1]),s&4&&(u.pulse=t[2]),e.$set(u)},i(t){n||(y(e.$$.fragment,t),t&&ge(()=>{n&&(i&&i.end(1),r=ke(l,de,{duration:300}),r.start())}),n=!0)},o(t){I(e.$$.fragment,t),r&&r.invalidate(),t&&(i=Te(l,de,{duration:300,start:.95})),n=!1},d(t){t&&_(l),x(e),t&&i&&i.end()}}}function Me(a){let l,e,r,i,n,t,s=a[1]&&he(a);return{c(){l=T("link"),e=K(),r=T("div"),s&&s.c(),this.h()},l(u){const f=Pe("svelte-9nuprp",document.head);l=P(f,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0}),f.forEach(_),e=L(u),r=P(u,"DIV",{class:!0});var v=j(r);s&&s.l(v),v.forEach(_),this.h()},h(){d(l,"rel","stylesheet"),d(l,"href","https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css"),d(l,"integrity","sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ"),d(l,"crossorigin","anonymous"),d(r,"class","container svelte-1hlky7j")},m(u,f){p(document.head,l),V(u,e,f),V(u,r,f),s&&s.m(r,null),i=!0,n||(t=F(r,"mousemove",a[4]),n=!0)},p(u,[f]){u[1]?s?(s.p(u,f),f&2&&y(s,1)):(s=he(u),s.c(),y(s,1),s.m(r,null)):s&&(J(),I(s,1,1,()=>{s=null}),X())},i(u){i||(y(s),i=!0)},o(u){I(s),i=!1},d(u){u&&(_(e),_(r)),_(l),s&&s.d(),n=!1,t()}}}function je(a,l,e){A.registerSlideTypes();let{slides:r}=l,{audioData:i}=l,n=null,t,s=0,u,f=!1;function v(){f||(e(3,f=!0),setTimeout(()=>{e(3,f=!1)},5e3))}function C(){u=setInterval(b,500),e(2,s=Math.floor(t.pulse()))}function b(){e(2,s=Math.floor(t.pulse()))}function U(){clearInterval(u),e(2,s=Math.floor(t.pulse()))}function o(){t.pause(),e(2,s=Math.floor(t.pulse()))}function M(S){t.setPulse(S),e(2,s=Math.floor(t.pulse()))}let D=null;return ve(async()=>{D=await A.loadSoundFromUrl(i),e(0,n=await A.loadAssets()),await A.loadAppImages(r),e(1,t=new A.Player(r,D)),await t.init()}),Se(()=>{D&&D.unload()}),a.$$set=S=>{"slides"in S&&e(9,r=S.slides),"audioData"in S&&e(10,i=S.audioData)},[n,t,s,f,v,C,U,o,M,r,i]}class He extends se{constructor(l){super(),re(this,l,je,Me,te,{slides:9,audioData:10})}}export{He as P};
